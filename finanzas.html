<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historia Instructiva: La Fábrica de Sueños - Calculadoras de Negocios</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            line-height: 1.6;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .chapter {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        h2 {
            color: #007bff;
        }
        h3 {
            color: #555;
        }
        p.story {
            font-style: italic;
            color: #444;
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        label {
            font-weight: bold;
        }
        input[type="number"] {
            padding: 8px;
            width: 200px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            background-color: #28a745;
            color: white;
            padding: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            width: 150px;
        }
        button:hover {
            background-color: #218838;
        }
        .result {
            margin-top: 15px;
            font-size: 18px;
            color: #333;
        }
        select {
            margin-top: 20px;
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <h1>Historia Instructiva: La Fábrica de Sueños</h1>
    <p>Esta página cuenta la historia de Ana, una emprendedora que inicia su fábrica de juguetes llamada "La Fábrica de Sueños". A lo largo de su aventura, enfrenta desafíos reales de negocios que requieren cálculos simples pero poderosos. Cada capítulo termina con una situación que necesita uno de estos cálculos, explicados de manera fácil para principiantes. Usa las calculadoras interactivas para resolverlos como Ana. ¡Aprende mientras sigues la historia!</p>
    
    <div class="chapter" id="chapter1">
        <h2>Capítulo 1: El Préstamo Inicial</h2>
        <p class="story">Ana soñaba con abrir su fábrica de juguetes. Para empezar, pidió un préstamo al banco de $10,000 a una tasa de interés del 5% por año, por 2 años. No quería complicaciones con intereses que crecieran sobre intereses, así que eligió un interés simple. Pero, ¿cuánto interés pagaría al final? Esto la ayudaría a planificar sus pagos.</p>
        <h3>Interés Simple: Explicación Fácil</h3>
        <p>Imagina que pides dinero prestado y solo pagas interés sobre la cantidad inicial, sin que el interés se acumule. Es como un alquiler fijo por el dinero. Úsalo cuando quieres saber el costo básico de un préstamo corto, como para comprar equipo. Fórmula sencilla: Interés = Cantidad inicial × Tasa (en %) × Tiempo (en años) / 100. Solo ingresa los números y calcula.</p>
        <form>
            <label>Cantidad inicial (Principal): <input type="number" id="si-principal" required></label>
            <label>Tasa de interés (% por año): <input type="number" id="si-rate" required></label>
            <label>Tiempo (años): <input type="number" id="si-time" required></label>
            <button type="button" onclick="calculateSimpleInterest()">Calcular</button>
        </form>
        <div class="result" id="si-result"></div>
        <select id="si-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter2">
        <h2>Capítulo 2: La Inversión en Ahorros</h2>
        <p class="story">Con algo de dinero extra, Ana invirtió $5,000 en una cuenta de ahorros con interés compuesto al 4% anual, compuesto mensualmente, por 3 años. Quería ver cómo crecía su dinero con el tiempo, ya que los intereses se suman al principal. ¿Cuánto tendría al final?</p>
        <h3>Interés Compuesto: Explicación Fácil</h3>
        <p>Es como una bola de nieve: el interés se calcula sobre el dinero inicial más los intereses ya ganados. Úsalo para planificar ahorros o inversiones a largo plazo, como fondos para expandir tu negocio. Fórmula: Monto final = Cantidad inicial × (1 + Tasa/100/dividido por frecuencia)^(frecuencia × años). La frecuencia es cuántas veces al año se calcula (ej. 12 para mensual). Prueba con tus números.</p>
        <form>
            <label>Cantidad inicial (Principal): <input type="number" id="ci-principal" required></label>
            <label>Tasa de interés (% por año): <input type="number" id="ci-rate" required></label>
            <label>Tiempo (años): <input type="number" id="ci-time" required></label>
            <label>Frecuencia (ej. 12 para mensual): <input type="number" id="ci-compound" value="1" required></label>
            <button type="button" onclick="calculateCompoundInterest()">Calcular</button>
        </form>
        <div class="result" id="ci-result"></div>
        <select id="ci-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter3">
        <h2>Capítulo 3: Evaluando la Primera Máquina</h2>
        <p class="story">Ana compró una máquina por $2,000 y la vendió después por $3,000. Quería saber si fue una buena inversión midiendo el retorno. Esto le ayudaría a decidir futuras compras.</p>
        <h3>Retorno de Inversión (ROI): Explicación Fácil</h3>
        <p>Es un porcentaje que muestra cuánto ganaste (o perdiste) comparado con lo que invertiste. Como decir: "Por cada dólar que puse, gané X centavos". Úsalo para comparar proyectos, como comprar equipo o publicidad. Fórmula: ROI = (Ganancia - Costo) / Costo × 100. Ingresa el costo y lo que recibiste de vuelta.</p>
        <form>
            <label>Costo de la inversión: <input type="number" id="roi-cost" required></label>
            <label>Ganancia o retorno: <input type="number" id="roi-return" required></label>
            <button type="button" onclick="calculateROI()">Calcular</button>
        </form>
        <div class="result" id="roi-result"></div>
        <select id="roi-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter4">
        <h2>Capítulo 4: Cubriendo Costos</h2>
        <p class="story">La fábrica tenía costos fijos de $1,000 al mes (alquiler, etc.) y variables de $5 por juguete. Vendía cada uno a $10. Ana necesitaba saber cuántos juguetes vender para no perder dinero.</p>
        <h3>Punto de Equilibrio (Break-even): Explicación Fácil</h3>
        <p>Es el número de productos que debes vender para cubrir todos tus costos, sin ganar ni perder. Como encontrar el "punto cero" en tus finanzas. Úsalo al empezar un negocio o lanzar un producto nuevo. Fórmula: Unidades = Costos fijos / (Precio por unidad - Costo variable por unidad). Solo ingresa esos tres números.</p>
        <form>
            <label>Costos fijos (totales): <input type="number" id="be-fixed" required></label>
            <label>Precio de venta por unidad: <input type="number" id="be-price" required></label>
            <label>Costo variable por unidad: <input type="number" id="be-variable" required></label>
            <button type="button" onclick="calculateBreakEven()">Calcular</button>
        </form>
        <div class="result" id="be-result"></div>
        <select id="be-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter5">
        <h2>Capítulo 5: Midiendo Ganancias</h2>
        <p class="story">En su primer mes, Ana vendió juguetes por $2,000, pero el costo de hacerlos fue $1,200. Quería ver qué porcentaje de sus ventas era ganancia pura.</p>
        <h3>Margen de Ganancia Bruta: Explicación Fácil</h3>
        <p>Es el porcentaje de tus ventas que queda después de restar el costo directo de producir los productos. Como saber cuánto "sobrevive" de cada venta. Úsalo para ver si tu precio es justo o si necesitas bajar costos. Fórmula: Margen = (Ventas - Costo de productos) / Ventas × 100. Ingresa ventas y costos.</p>
        <form>
            <label>Ventas totales (Ingresos): <input type="number" id="pm-revenue" required></label>
            <label>Costo de los productos vendidos (COGS): <input type="number" id="pm-cogs" required></label>
            <button type="button" onclick="calculateProfitMargin()">Calcular</button>
        </form>
        <div class="result" id="pm-result"></div>
        <select id="pm-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter6">
        <h2>Capítulo 6: Fijando Precios</h2>
        <p class="story">Cada juguete costaba $8 producirlo, y Ana lo vendía a $12. Quería calcular cuánto estaba agregando al costo como ganancia.</p>
        <h3>Marcado (Markup): Explicación Fácil</h3>
        <p>Es el porcentaje que agregas al costo para llegar al precio de venta. Como decidir cuánto "margen" quieres. Úsalo en tiendas o fabricación para establecer precios. Fórmula: Markup = (Precio de venta - Costo) / Costo × 100. Prueba con tus costos y precios.</p>
        <form>
            <label>Costo por unidad: <input type="number" id="mu-cost" required></label>
            <label>Precio de venta por unidad: <input type="number" id="mu-selling" required></label>
            <button type="button" onclick="calculateMarkup()">Calcular</button>
        </form>
        <div class="result" id="mu-result"></div>
        <select id="mu-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter7">
        <h2>Capítulo 7: La Promoción Especial</h2>
        <p class="story">Para atraer clientes, Ana ofreció un 20% de descuento en juguetes de $15. Necesitaba calcular el precio final para no perder dinero.</p>
        <h3>Descuento: Explicación Fácil</h3>
        <p>Es rebajar un porcentaje del precio original. Úsalo para planificar ventas o promociones. Fórmula: Precio final = Precio original × (1 - Descuento/100). Ingresa el precio y el porcentaje.</p>
        <form>
            <label>Precio original: <input type="number" id="dis-original" required></label>
            <label>Porcentaje de descuento: <input type="number" id="dis-percent" required></label>
            <button type="button" onclick="calculateDiscount()">Calcular</button>
        </form>
        <div class="result" id="dis-result"></div>
        <select id="dis-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter8">
        <h2>Capítulo 8: El Préstamo para Expansión</h2>
        <p class="story">Ana tomó un préstamo de $20,000 al 6% anual por 5 años. Quería saber cuánto pagaría cada mes para presupuestar.</p>
        <h3>Pago Mensual de Préstamo: Explicación Fácil</h3>
        <p>Calcula cuánto pagarás por mes en un préstamo con interés fijo. Úsalo para hipotecas o préstamos grandes. Fórmula: Usa la tasa mensual y número de meses. Ingresa monto, tasa anual y años.</p>
        <form>
            <label>Monto del préstamo: <input type="number" id="lp-principal" required></label>
            <label>Tasa de interés anual (%): <input type="number" id="lp-rate" required></label>
            <label>Años del préstamo: <input type="number" id="lp-years" required></label>
            <button type="button" onclick="calculateLoanPayment()">Calcular</button>
        </form>
        <div class="result" id="lp-result"></div>
        <select id="lp-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter9">
        <h2>Capítulo 9: El Valor de las Máquinas</h2>
        <p class="story">Una máquina costó $10,000, valdría $2,000 al final y duraría 5 años. Ana calculó la depreciación anual para contabilidad.</p>
        <h3>Depreciación Lineal: Explicación Fácil</h3>
        <p>Es cómo un activo pierde valor con el tiempo, de manera constante. Úsalo para impuestos o balances. Fórmula: Depreciación anual = (Costo - Valor final) / Años de vida. Ingresa los valores.</p>
        <form>
            <label>Costo del activo: <input type="number" id="dep-cost" required></label>
            <label>Valor final (residual): <input type="number" id="dep-salvage" required></label>
            <label>Años de vida útil: <input type="number" id="dep-life" required></label>
            <button type="button" onclick="calculateDepreciation()">Calcular</button>
        </form>
        <div class="result" id="dep-result"></div>
        <select id="dep-history">
            <option>Historial vacío</option>
        </select>
    </div>
    
    <div class="chapter" id="chapter10">
        <h2>Capítulo 10: Salud Financiera</h2>
        <p class="story">Ana tenía $15,000 en activos rápidos (dinero, inventario) y $10,000 en deudas cortas. Quería verificar si podía pagar fácilmente.</p>
        <h3>Ratio de Liquidez (Current Ratio): Explicación Fácil</h3>
        <p>Mide si tienes suficiente dinero rápido para pagar deudas inmediatas. Un número mayor a 1 es bueno. Úsalo para chequear la salud de tu negocio. Fórmula: Ratio = Activos rápidos / Deudas cortas. Ingresa los montos.</p>
        <form>
            <label>Activos rápidos (corrientes): <input type="number" id="cr-assets" required></label>
            <label>Deudas cortas (pasivos corrientes): <input type="number" id="cr-liabilities" required></label>
            <button type="button" onclick="calculateCurrentRatio()">Calcular</button>
        </form>
        <div class="result" id="cr-result"></div>
        <select id="cr-history">
            <option>Historial vacío</option>
        </select>
    </div>

    <script>
        // Historiales (mismo que antes)
        let siHistory = [];
        let ciHistory = [];
        let roiHistory = [];
        let beHistory = [];
        let pmHistory = [];
        let muHistory = [];
        let disHistory = [];
        let lpHistory = [];
        let depHistory = [];
        let crHistory = [];

        function updateHistory(selectId, history) {
            const select = document.getElementById(selectId);
            select.innerHTML = '';
            if (history.length === 0) {
                const option = document.createElement('option');
                option.text = 'Historial vacío';
                select.add(option);
            } else {
                history.forEach(entry => {
                    const option = document.createElement('option');
                    option.text = entry;
                    select.add(option);
                });
            }
        }

        // Funciones de cálculo (mismas que antes, con entradas actualizadas si es necesario)
        function calculateSimpleInterest() {
            const principal = parseFloat(document.getElementById('si-principal').value);
            const rate = parseFloat(document.getElementById('si-rate').value);
            const time = parseFloat(document.getElementById('si-time').value);
            if (isNaN(principal) || isNaN(rate) || isNaN(time)) return;
            const interest = (principal * rate * time) / 100;
            document.getElementById('si-result').innerHTML = `Interés: ${interest.toFixed(2)}`;
            const entry = `Principal: ${principal}, Tasa: ${rate}%, Tiempo: ${time} años → Interés: ${interest.toFixed(2)} (Fórmula: P * R * T / 100)`;
            siHistory.push(entry);
            if (siHistory.length > 5) siHistory.shift();
            updateHistory('si-history', siHistory);
        }

        function calculateCompoundInterest() {
            const principal = parseFloat(document.getElementById('ci-principal').value);
            const rate = parseFloat(document.getElementById('ci-rate').value);
            const time = parseFloat(document.getElementById('ci-time').value);
            const compound = parseFloat(document.getElementById('ci-compound').value);
            if (isNaN(principal) || isNaN(rate) || isNaN(time) || isNaN(compound)) return;
            const amount = principal * Math.pow((1 + (rate / 100 / compound)), (compound * time));
            document.getElementById('ci-result').innerHTML = `Monto total: ${amount.toFixed(2)}`;
            const entry = `Principal: ${principal}, Tasa: ${rate}%, Tiempo: ${time} años, Frecuencia: ${compound} → Monto: ${amount.toFixed(2)} (Fórmula: P * (1 + R/100/n)^(n*t))`;
            ciHistory.push(entry);
            if (ciHistory.length > 5) ciHistory.shift();
            updateHistory('ci-history', ciHistory);
        }

        function calculateROI() {
            const cost = parseFloat(document.getElementById('roi-cost').value);
            const returnVal = parseFloat(document.getElementById('roi-return').value);
            if (isNaN(cost) || isNaN(returnVal)) return;
            const roi = ((returnVal - cost) / cost) * 100;
            document.getElementById('roi-result').innerHTML = `ROI: ${roi.toFixed(2)}%`;
            const entry = `Costo: ${cost}, Retorno: ${returnVal} → ROI: ${roi.toFixed(2)}% (Fórmula: (Retorno - Costo)/Costo * 100)`;
            roiHistory.push(entry);
            if (roiHistory.length > 5) roiHistory.shift();
            updateHistory('roi-history', roiHistory);
        }

        function calculateBreakEven() {
            const fixed = parseFloat(document.getElementById('be-fixed').value);
            const price = parseFloat(document.getElementById('be-price').value);
            const variable = parseFloat(document.getElementById('be-variable').value);
            if (isNaN(fixed) || isNaN(price) || isNaN(variable)) return;
            const units = fixed / (price - variable);
            document.getElementById('be-result').innerHTML = `Unidades para equilibrio: ${units.toFixed(2)}`;
            const entry = `Fijos: ${fixed}, Precio: ${price}, Variable: ${variable} → Unidades: ${units.toFixed(2)} (Fórmula: Fijos / (Precio - Variable))`;
            beHistory.push(entry);
            if (beHistory.length > 5) beHistory.shift();
            updateHistory('be-history', beHistory);
        }

        function calculateProfitMargin() {
            const revenue = parseFloat(document.getElementById('pm-revenue').value);
            const cogs = parseFloat(document.getElementById('pm-cogs').value);
            if (isNaN(revenue) || isNaN(cogs)) return;
            const margin = ((revenue - cogs) / revenue) * 100;
            document.getElementById('pm-result').innerHTML = `Margen: ${margin.toFixed(2)}%`;
            const entry = `Ingresos: ${revenue}, COGS: ${cogs} → Margen: ${margin.toFixed(2)}% (Fórmula: (Ingresos - COGS)/Ingresos * 100)`;
            pmHistory.push(entry);
            if (pmHistory.length > 5) pmHistory.shift();
            updateHistory('pm-history', pmHistory);
        }

        function calculateMarkup() {
            const cost = parseFloat(document.getElementById('mu-cost').value);
            const selling = parseFloat(document.getElementById('mu-selling').value);
            if (isNaN(cost) || isNaN(selling)) return;
            const markup = ((selling - cost) / cost) * 100;
            document.getElementById('mu-result').innerHTML = `Markup: ${markup.toFixed(2)}%`;
            const entry = `Costo: ${cost}, Venta: ${selling} → Markup: ${markup.toFixed(2)}% (Fórmula: (Venta - Costo)/Costo * 100)`;
            muHistory.push(entry);
            if (muHistory.length > 5) muHistory.shift();
            updateHistory('mu-history', muHistory);
        }

        function calculateDiscount() {
            const original = parseFloat(document.getElementById('dis-original').value);
            const percent = parseFloat(document.getElementById('dis-percent').value);
            if (isNaN(original) || isNaN(percent)) return;
            const finalPrice = original * (1 - percent / 100);
            document.getElementById('dis-result').innerHTML = `Precio final: ${finalPrice.toFixed(2)}`;
            const entry = `Original: ${original}, Descuento: ${percent}% → Final: ${finalPrice.toFixed(2)} (Fórmula: Original * (1 - Descuento/100))`;
            disHistory.push(entry);
            if (disHistory.length > 5) disHistory.shift();
            updateHistory('dis-history', disHistory);
        }

        function calculateLoanPayment() {
            const principal = parseFloat(document.getElementById('lp-principal').value);
            const rate = parseFloat(document.getElementById('lp-rate').value) / 100 / 12;
            const years = parseFloat(document.getElementById('lp-years').value) * 12;
            if (isNaN(principal) || isNaN(rate) || isNaN(years)) return;
            const payment = principal * (rate * Math.pow(1 + rate, years)) / (Math.pow(1 + rate, years) - 1);
            document.getElementById('lp-result').innerHTML = `Pago mensual: ${payment.toFixed(2)}`;
            const entry = `Principal: ${principal}, Tasa: ${rate*1200}%, Años: ${years/12} → Pago: ${payment.toFixed(2)} (Fórmula: P * (r(1+r)^n)/((1+r)^n -1))`;
            lpHistory.push(entry);
            if (lpHistory.length > 5) lpHistory.shift();
            updateHistory('lp-history', lpHistory);
        }

        function calculateDepreciation() {
            const cost = parseFloat(document.getElementById('dep-cost').value);
            const salvage = parseFloat(document.getElementById('dep-salvage').value);
            const life = parseFloat(document.getElementById('dep-life').value);
            if (isNaN(cost) || isNaN(salvage) || isNaN(life)) return;
            const dep = (cost - salvage) / life;
            document.getElementById('dep-result').innerHTML = `Depreciación anual: ${dep.toFixed(2)}`;
            const entry = `Costo: ${cost}, Residual: ${salvage}, Vida: ${life} → Depreciación: ${dep.toFixed(2)} (Fórmula: (Costo - Residual)/Vida)`;
            depHistory.push(entry);
            if (depHistory.length > 5) depHistory.shift();
            updateHistory('dep-history', depHistory);
        }

        function calculateCurrentRatio() {
            const assets = parseFloat(document.getElementById('cr-assets').value);
            const liabilities = parseFloat(document.getElementById('cr-liabilities').value);
            if (isNaN(assets) || isNaN(liabilities)) return;
            const ratio = assets / liabilities;
            document.getElementById('cr-result').innerHTML = `Ratio: ${ratio.toFixed(2)}`;
            const entry = `Activos: ${assets}, Pasivos: ${liabilities} → Ratio: ${ratio.toFixed(2)} (Fórmula: Activos / Pasivos)`;
            crHistory.push(entry);
            if (crHistory.length > 5) crHistory.shift();
            updateHistory('cr-history', crHistory);
        }
    </script>
</body>
</html>
