<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadoras Financieras de Negocios</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #f4f4f4;
      line-height: 1.6;
    }
    h1 {
      text-align: center;
      color: #333;
    }
    .chapter {
      background-color: #fff;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 30px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    h2 {
      color: #007bff;
    }
    h3 {
      color: #555;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    label {
      font-weight: bold;
    }
    input[type="number"] {
      padding: 8px;
      width: 200px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      background-color: #28a745;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 150px;
    }
    button:hover {
      background-color: #218838;
    }
    .result {
      margin-top: 15px;
      font-size: 18px;
      color: #333;
    }
    select {
      margin-top: 20px;
      width: 100%;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>
  <h1>Calculadoras Financieras para Negocios</h1>
  <p>Estas herramientas te ayudarán a evaluar préstamos, inversiones, márgenes, depreciación y otros conceptos clave para gestionar tus finanzas de manera clara y efectiva.</p>

  <div class="chapter" id="chapter1">
    <h2>Interés Simple</h2>
    <p>El interés simple se calcula únicamente sobre el capital inicial. Es útil para préstamos de corto plazo o cálculos básicos.  
    <br><b>Fórmula:</b> Interés = Principal × Tasa × Tiempo / 100</p>
    <form>
      <label>Cantidad inicial (Principal): <input type="number" id="si-principal" required></label>
      <label>Tasa de interés (% por año): <input type="number" id="si-rate" required></label>
      <label>Tiempo (años): <input type="number" id="si-time" required></label>
      <button type="button" onclick="calculateSimpleInterest()">Calcular</button>
    </form>
    <div class="result" id="si-result"></div>
    <select id="si-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter2">
    <h2>Interés Compuesto</h2>
    <p>El interés compuesto acumula intereses sobre intereses, ideal para ahorros o inversiones a largo plazo.  
    <br><b>Fórmula:</b> Monto = Principal × (1 + Tasa/n)^(n × Tiempo)</p>
    <form>
      <label>Cantidad inicial (Principal): <input type="number" id="ci-principal" required></label>
      <label>Tasa de interés (% por año): <input type="number" id="ci-rate" required></label>
      <label>Tiempo (años): <input type="number" id="ci-time" required></label>
      <label>Frecuencia (ej. 12 para mensual): <input type="number" id="ci-compound" value="1" required></label>
      <button type="button" onclick="calculateCompoundInterest()">Calcular</button>
    </form>
    <div class="result" id="ci-result"></div>
    <select id="ci-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter3">
    <h2>Retorno de Inversión (ROI)</h2>
    <p>El ROI mide la rentabilidad de una inversión en porcentaje.  
    <br><b>Fórmula:</b> ROI = (Ganancia – Costo) / Costo × 100</p>
    <form>
      <label>Costo de la inversión: <input type="number" id="roi-cost" required></label>
      <label>Retorno total: <input type="number" id="roi-return" required></label>
      <button type="button" onclick="calculateROI()">Calcular</button>
    </form>
    <div class="result" id="roi-result"></div>
    <select id="roi-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter4">
    <h2>Punto de Equilibrio</h2>
    <p>Indica cuántas unidades debes vender para cubrir todos tus costos, sin pérdida ni ganancia.  
    <br><b>Fórmula:</b> Unidades = Costos fijos / (Precio – Costo variable)</p>
    <form>
      <label>Costos fijos: <input type="number" id="be-fixed" required></label>
      <label>Precio de venta por unidad: <input type="number" id="be-price" required></label>
      <label>Costo variable por unidad: <input type="number" id="be-variable" required></label>
      <button type="button" onclick="calculateBreakEven()">Calcular</button>
    </form>
    <div class="result" id="be-result"></div>
    <select id="be-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter5">
    <h2>Margen de Ganancia Bruta</h2>
    <p>Mide qué porcentaje de tus ingresos se convierte en ganancia después de restar el costo de producción.  
    <br><b>Fórmula:</b> Margen = (Ingresos – Costos) / Ingresos × 100</p>
    <form>
      <label>Ingresos totales: <input type="number" id="pm-revenue" required></label>
      <label>Costos de producción (COGS): <input type="number" id="pm-cogs" required></label>
      <button type="button" onclick="calculateProfitMargin()">Calcular</button>
    </form>
    <div class="result" id="pm-result"></div>
    <select id="pm-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter6">
    <h2>Markup</h2>
    <p>El markup muestra cuánto se incrementa el precio sobre el costo para fijar la venta.  
    <br><b>Fórmula:</b> Markup = (Precio – Costo) / Costo × 100</p>
    <form>
      <label>Costo por unidad: <input type="number" id="mu-cost" required></label>
      <label>Precio de venta por unidad: <input type="number" id="mu-selling" required></label>
      <button type="button" onclick="calculateMarkup()">Calcular</button>
    </form>
    <div class="result" id="mu-result"></div>
    <select id="mu-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter7">
    <h2>Descuento</h2>
    <p>Calcula el precio final después de aplicar un descuento porcentual.  
    <br><b>Fórmula:</b> Precio final = Precio original × (1 – Descuento/100)</p>
    <form>
      <label>Precio original: <input type="number" id="dis-original" required></label>
      <label>Porcentaje de descuento: <input type="number" id="dis-percent" required></label>
      <button type="button" onclick="calculateDiscount()">Calcular</button>
    </form>
    <div class="result" id="dis-result"></div>
    <select id="dis-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter8">
    <h2>Pago Mensual de Préstamo</h2>
    <p>Determina la cuota mensual de un préstamo con interés fijo.  
    <br><b>Fórmula:</b> Pago = P × (r(1+r)^n) / ((1+r)^n – 1)</p>
    <form>
      <label>Monto del préstamo: <input type="number" id="lp-principal" required></label>
      <label>Tasa de interés anual (%): <input type="number" id="lp-rate" required></label>
      <label>Años del préstamo: <input type="number" id="lp-years" required></label>
      <button type="button" onclick="calculateLoanPayment()">Calcular</button>
    </form>
    <div class="result" id="lp-result"></div>
    <select id="lp-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter9">
    <h2>Depreciación Lineal</h2>
    <p>La depreciación lineal distribuye la pérdida de valor de un activo de manera uniforme en el tiempo.  
    <br><b>Fórmula:</b> Depreciación = (Costo – Valor residual) / Vida útil</p>
    <form>
      <label>Costo del activo: <input type="number" id="dep-cost" required></label>
      <label>Valor residual: <input type="number" id="dep-salvage" required></label>
      <label>Años de vida útil: <input type="number" id="dep-life" required></label>
      <button type="button" onclick="calculateDepreciation()">Calcular</button>
    </form>
    <div class="result" id="dep-result"></div>
    <select id="dep-history"><option>Historial vacío</option></select>
  </div>

  <div class="chapter" id="chapter10">
    <h2>Ratio de Liquidez (Current Ratio)</h2>
    <p>Mide la capacidad de una empresa para cubrir deudas a corto plazo con activos corrientes.  
    <br><b>Fórmula:</b> Ratio = Activos corrientes / Pasivos corrientes</p>
    <form>
      <label>Activos corrientes: <input type="number" id="cr-assets" required></label>
      <label>Pasivos corrientes: <input type="number" id="cr-liabilities" required></label>
      <button type="button" onclick="calculateCurrentRatio()">Calcular</button>
    </form>
    <div class="result" id="cr-result"></div>
    <select id="cr-history"><option>Historial vacío</option></select>
  </div>

  <script>
     // Historiales (mismo que antes)
        let siHistory = [];
        let ciHistory = [];
        let roiHistory = [];
        let beHistory = [];
        let pmHistory = [];
        let muHistory = [];
        let disHistory = [];
        let lpHistory = [];
        let depHistory = [];
        let crHistory = [];

        function updateHistory(selectId, history) {
            const select = document.getElementById(selectId);
            select.innerHTML = '';
            if (history.length === 0) {
                const option = document.createElement('option');
                option.text = 'Historial vacío';
                select.add(option);
            } else {
                history.forEach(entry => {
                    const option = document.createElement('option');
                    option.text = entry;
                    select.add(option);
                });
            }
        }

        // Funciones de cálculo (mismas que antes, con entradas actualizadas si es necesario)
        function calculateSimpleInterest() {
            const principal = parseFloat(document.getElementById('si-principal').value);
            const rate = parseFloat(document.getElementById('si-rate').value);
            const time = parseFloat(document.getElementById('si-time').value);
            if (isNaN(principal) || isNaN(rate) || isNaN(time)) return;
            const interest = (principal * rate * time) / 100;
            document.getElementById('si-result').innerHTML = Interés: ${interest.toFixed(2)};
            const entry = Principal: ${principal}, Tasa: ${rate}%, Tiempo: ${time} años → Interés: ${interest.toFixed(2)} (Fórmula: P * R * T / 100);
            siHistory.push(entry);
            if (siHistory.length > 5) siHistory.shift();
            updateHistory('si-history', siHistory);
        }

        function calculateCompoundInterest() {
            const principal = parseFloat(document.getElementById('ci-principal').value);
            const rate = parseFloat(document.getElementById('ci-rate').value);
            const time = parseFloat(document.getElementById('ci-time').value);
            const compound = parseFloat(document.getElementById('ci-compound').value);
            if (isNaN(principal) || isNaN(rate) || isNaN(time) || isNaN(compound)) return;
            const amount = principal * Math.pow((1 + (rate / 100 / compound)), (compound * time));
            document.getElementById('ci-result').innerHTML = Monto total: ${amount.toFixed(2)};
            const entry = Principal: ${principal}, Tasa: ${rate}%, Tiempo: ${time} años, Frecuencia: ${compound} → Monto: ${amount.toFixed(2)} (Fórmula: P * (1 + R/100/n)^(n*t));
            ciHistory.push(entry);
            if (ciHistory.length > 5) ciHistory.shift();
            updateHistory('ci-history', ciHistory);
        }

        function calculateROI() {
            const cost = parseFloat(document.getElementById('roi-cost').value);
            const returnVal = parseFloat(document.getElementById('roi-return').value);
            if (isNaN(cost) || isNaN(returnVal)) return;
            const roi = ((returnVal - cost) / cost) * 100;
            document.getElementById('roi-result').innerHTML = ROI: ${roi.toFixed(2)}%;
            const entry = Costo: ${cost}, Retorno: ${returnVal} → ROI: ${roi.toFixed(2)}% (Fórmula: (Retorno - Costo)/Costo * 100);
            roiHistory.push(entry);
            if (roiHistory.length > 5) roiHistory.shift();
            updateHistory('roi-history', roiHistory);
        }

        function calculateBreakEven() {
            const fixed = parseFloat(document.getElementById('be-fixed').value);
            const price = parseFloat(document.getElementById('be-price').value);
            const variable = parseFloat(document.getElementById('be-variable').value);
            if (isNaN(fixed) || isNaN(price) || isNaN(variable)) return;
            const units = fixed / (price - variable);
            document.getElementById('be-result').innerHTML = Unidades para equilibrio: ${units.toFixed(2)};
            const entry = Fijos: ${fixed}, Precio: ${price}, Variable: ${variable} → Unidades: ${units.toFixed(2)} (Fórmula: Fijos / (Precio - Variable));
            beHistory.push(entry);
            if (beHistory.length > 5) beHistory.shift();
            updateHistory('be-history', beHistory);
        }

        function calculateProfitMargin() {
            const revenue = parseFloat(document.getElementById('pm-revenue').value);
            const cogs = parseFloat(document.getElementById('pm-cogs').value);
            if (isNaN(revenue) || isNaN(cogs)) return;
            const margin = ((revenue - cogs) / revenue) * 100;
            document.getElementById('pm-result').innerHTML = Margen: ${margin.toFixed(2)}%;
            const entry = Ingresos: ${revenue}, COGS: ${cogs} → Margen: ${margin.toFixed(2)}% (Fórmula: (Ingresos - COGS)/Ingresos * 100);
            pmHistory.push(entry);
            if (pmHistory.length > 5) pmHistory.shift();
            updateHistory('pm-history', pmHistory);
        }

        function calculateMarkup() {
            const cost = parseFloat(document.getElementById('mu-cost').value);
            const selling = parseFloat(document.getElementById('mu-selling').value);
            if (isNaN(cost) || isNaN(selling)) return;
            const markup = ((selling - cost) / cost) * 100;
            document.getElementById('mu-result').innerHTML = Markup: ${markup.toFixed(2)}%;
            const entry = Costo: ${cost}, Venta: ${selling} → Markup: ${markup.toFixed(2)}% (Fórmula: (Venta - Costo)/Costo * 100);
            muHistory.push(entry);
            if (muHistory.length > 5) muHistory.shift();
            updateHistory('mu-history', muHistory);
        }

        function calculateDiscount() {
            const original = parseFloat(document.getElementById('dis-original').value);
            const percent = parseFloat(document.getElementById('dis-percent').value);
            if (isNaN(original) || isNaN(percent)) return;
            const finalPrice = original * (1 - percent / 100);
            document.getElementById('dis-result').innerHTML = Precio final: ${finalPrice.toFixed(2)};
            const entry = Original: ${original}, Descuento: ${percent}% → Final: ${finalPrice.toFixed(2)} (Fórmula: Original * (1 - Descuento/100));
            disHistory.push(entry);
            if (disHistory.length > 5) disHistory.shift();
            updateHistory('dis-history', disHistory);
        }

        function calculateLoanPayment() {
            const principal = parseFloat(document.getElementById('lp-principal').value);
            const rate = parseFloat(document.getElementById('lp-rate').value) / 100 / 12;
            const years = parseFloat(document.getElementById('lp-years').value) * 12;
            if (isNaN(principal) || isNaN(rate) || isNaN(years)) return;
            const payment = principal * (rate * Math.pow(1 + rate, years)) / (Math.pow(1 + rate, years) - 1);
            document.getElementById('lp-result').innerHTML = Pago mensual: ${payment.toFixed(2)};
            const entry = Principal: ${principal}, Tasa: ${rate*1200}%, Años: ${years/12} → Pago: ${payment.toFixed(2)} (Fórmula: P * (r(1+r)^n)/((1+r)^n -1));
            lpHistory.push(entry);
            if (lpHistory.length > 5) lpHistory.shift();
            updateHistory('lp-history', lpHistory);
        }

        function calculateDepreciation() {
            const cost = parseFloat(document.getElementById('dep-cost').value);
            const salvage = parseFloat(document.getElementById('dep-salvage').value);
            const life = parseFloat(document.getElementById('dep-life').value);
            if (isNaN(cost) || isNaN(salvage) || isNaN(life)) return;
            const dep = (cost - salvage) / life;
            document.getElementById('dep-result').innerHTML = Depreciación anual: ${dep.toFixed(2)};
            const entry = Costo: ${cost}, Residual: ${salvage}, Vida: ${life} → Depreciación: ${dep.toFixed(2)} (Fórmula: (Costo - Residual)/Vida);
            depHistory.push(entry);
            if (depHistory.length > 5) depHistory.shift();
            updateHistory('dep-history', depHistory);
        }

        function calculateCurrentRatio() {
            const assets = parseFloat(document.getElementById('cr-assets').value);
            const liabilities = parseFloat(document.getElementById('cr-liabilities').value);
            if (isNaN(assets) || isNaN(liabilities)) return;
            const ratio = assets / liabilities;
            document.getElementById('cr-result').innerHTML = Ratio: ${ratio.toFixed(2)};
            const entry = Activos: ${assets}, Pasivos: ${liabilities} → Ratio: ${ratio.toFixed(2)} (Fórmula: Activos / Pasivos);
            crHistory.push(entry);
            if (crHistory.length > 5) crHistory.shift();
            updateHistory('cr-history', crHistory);
        }
  </script>
</body>
</html>
