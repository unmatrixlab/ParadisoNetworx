<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">

    <title>LINGUA NEXUS | V7.2 VOICE COMMANDER PRO</title>

    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@300;400;600;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">

    

    <style>

        /* ==================== VARIABLES & RESET ==================== */

        :root {

            --bg-deep: #050505; --bg-card: #121214; --bg-hover: #1f1f22; --bg-input: #18181b;

            --txt-main: #f4f4f5; --txt-sec: #71717a; --border: #27272a;

            --c-noun: #0ea5e9; --c-adj: #d946ef; --c-reg: #22c55e; --c-irreg:#f59e0b; --c-func: #6366f1; 

            --primary: #3b82f6; --success: #10b981; --danger: #ef4444; --gold: #fbbf24; --purple: #a855f7;

            --font-head: 'Bebas Neue', sans-serif; --font-ui: 'Inter', sans-serif; --font-code: 'JetBrains Mono', monospace;

            --safe-bottom: env(safe-area-inset-bottom);

            --c-mixed: #334155;

        }

        :root.light-mode {

            --bg-deep: #f8fafc; --bg-card: #ffffff; --bg-hover: #f1f5f9; --bg-input: #e2e8f0;

            --txt-main: #0f172a; --txt-sec: #64748b; --border: #e2e8f0;

            --c-noun: #0284c7; --c-adj: #c026d3; --c-reg: #16a34a; --c-irreg:#d97706; --c-func: #4f46e5; --c-mixed: #334155;

        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; user-select: none; }

        body { 

            background-color: var(--bg-deep); color: var(--txt-main); font-family: var(--font-ui); 

            margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; 

            transition: background 0.3s, color 0.3s; 

        }



        /* HEADER */

        header { 

            height: 64px; flex-shrink: 0; display: flex; justify-content: space-between; align-items: center; 

            padding: 0 24px; background: rgba(5,5,5,0.95); border-bottom: 1px solid var(--border); 

            z-index: 50; backdrop-filter: blur(10px); 

        }

        .brand-area { display: flex; align-items: center; gap: 10px; cursor: pointer; }

        .brand { font-family: var(--font-head); font-size: 26px; letter-spacing: 2px; color: var(--txt-main); text-shadow: 0 0 10px rgba(255,255,255,0.1); }

        .back-btn { display: none; color: var(--txt-sec); }

        body:not(.is-home) .back-btn { display: block; }

        body:not(.is-home) .brand { display: none; } 

        .header-actions { display: flex; gap: 20px; }

        .icon-btn { background: none; border: none; color: var(--txt-sec); cursor: pointer; padding: 0; transition: 0.2s; }

        .icon-btn.active { color: var(--primary); filter: drop-shadow(0 0 5px var(--primary)); transform: scale(1.1); }



        /* MAIN LAYOUT */

        main { flex: 1; position: relative; width: 100%; overflow: hidden; }

        .view-screen { display: none; flex-direction: column; width: 100%; height: 100%; padding: 20px; padding-bottom: calc(40px + var(--safe-bottom)); overflow-y: auto; -webkit-overflow-scrolling: touch; }

        .view-screen.active { display: flex; }

        #view-game { overflow: hidden; padding-bottom: calc(20px + var(--safe-bottom)); }



        /* HOME UI */

        .welcome-text { margin-bottom: 10px; text-align: center; margin-top: 10px; }

        .welcome-text h1 { font-family: var(--font-head); font-size: 52px; margin: 0; line-height: 0.9; background: linear-gradient(to right, #fff, #aaa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }

        .global-progress { height: 6px; background: var(--bg-input); border-radius: 4px; overflow: hidden; margin: 15px 0 25px 0; width: 100%; border: 1px solid var(--border); }

        .global-progress-fill { height: 100%; background: linear-gradient(90deg, var(--c-noun), var(--primary), var(--success)); transition: width 1s ease; width: 0%; box-shadow: 0 0 10px rgba(16, 185, 129, 0.3); }

        .stats-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 30px; }

        .stat-pill { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; padding: 12px; text-align: center; }

        .stat-val { font-family: var(--font-code); font-weight: 700; font-size: 24px; display: block; }

        .stat-lbl { font-size: 10px; font-weight: 600; color: var(--txt-sec); text-transform: uppercase; margin-top: 4px; }

        .grid-menu { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; width: 100%; padding-bottom: 20px; }

        .menu-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 20px; padding: 24px 20px; display: flex; flex-direction: column; justify-content: space-between; min-height: 140px; cursor: pointer; transition: 0.2s; position: relative; overflow: hidden; }

        .menu-card:active { transform: scale(0.96); }

        .card-icon { width: 40px; height: 40px; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 20px; margin-bottom: 15px; background: rgba(255,255,255,0.05); }

        .menu-card h3 { margin: 0; font-family: var(--font-head); font-size: 28px; line-height: 1; letter-spacing: 1px; }

        .menu-card span { font-size: 12px; color: var(--txt-sec); font-weight: 500; margin-top: 6px; display: block; }

        .menu-card[data-type="noun"] { border-color: rgba(14, 165, 233, 0.3); color: var(--c-noun); } 

        .menu-card[data-type="adj"] { border-color: rgba(217, 70, 239, 0.3); color: var(--c-adj); }

        .menu-card[data-type="reg"] { border-color: rgba(34, 197, 94, 0.3); color: var(--c-reg); }

        .menu-card[data-type="irreg"] { border-color: rgba(245, 158, 11, 0.3); color: var(--c-irreg); }

        .menu-card[data-type="func"] { border-color: rgba(99, 102, 241, 0.3); color: var(--c-func); }

        .menu-card[data-type="mixed"] { border-color: var(--border); color: #fff; }

        .menu-card[data-type="folder"] { border-color: rgba(251, 191, 36, 0.3); color: var(--gold); }

        .menu-card.disabled { opacity: 0.3; filter: grayscale(1); pointer-events: none; border-style: dashed; }



        /* FOLDER & LISTS */

        .folder-grid { display: grid; gap: 10px; }

        .folder-item { background: var(--bg-card); border: 1px solid var(--border); padding: 20px; border-radius: 12px; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: 0.2s; }

        .folder-item:active { transform: scale(0.98); background: var(--bg-hover); }

        .folder-info h4 { margin: 0; font-size: 18px; color: var(--txt-main); text-transform: uppercase; }

        .folder-info span { font-size: 12px; color: var(--txt-sec); font-weight: 600; }

        .folder-play { width: 40px; height: 40px; background: var(--bg-deep); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--primary); }

        .folder-item.sys-all { border-color: var(--purple); background: linear-gradient(90deg, rgba(168, 85, 247, 0.05), transparent); } .folder-item.sys-all .folder-play { color: var(--purple); }

        .folder-item.sys-off { border-color: var(--c-noun); } .folder-item.sys-off .folder-play { color: var(--c-noun); }

        .folder-item.sys-imp { border-color: var(--gold); } .folder-item.sys-imp .folder-play { color: var(--gold); }



        /* SETTINGS */

        .section-box { background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 20px; margin-bottom: 20px; flex-shrink: 0; }

        .section-head { font-family: var(--font-head); font-size: 20px; margin-bottom: 15px; border-bottom: 1px solid var(--border); padding-bottom: 10px; letter-spacing: 1px; }

        .row-ctrl { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }

        .num-inp { background: var(--bg-input); border: 1px solid var(--border); color: var(--txt-main); border-radius: 8px; padding: 8px; width: 70px; text-align: center; font-family: var(--font-code); }

        .lib-search { width: 100%; background: var(--bg-card); border: 1px solid var(--border); padding: 14px; border-radius: 12px; color: var(--txt-main); font-size: 16px; margin-bottom: 15px; flex-shrink: 0; }

        .filter-bar { display: flex; gap: 8px; margin-bottom: 15px; flex-wrap: wrap; flex-shrink: 0; }

        .filter-btn { background: var(--bg-card); border: 1px solid var(--border); color: var(--txt-sec); padding: 8px 12px; border-radius: 8px; font-size: 11px; font-weight: 700; cursor: pointer; flex: 1; min-width: 50px; text-align: center; }

        .filter-btn.active { background: var(--primary); color: #fff; border-color: var(--primary); box-shadow: 0 0 10px rgba(59,130,246,0.3); }

        .lib-card { background: var(--bg-card); border: 1px solid var(--border); border-radius: 12px; margin-bottom: 10px; display: flex; flex-direction: column; overflow: hidden; flex-shrink: 0; }

        .lib-content { padding: 15px; }

        .lib-en { font-weight: 700; font-size: 16px; color: var(--txt-main); text-transform: uppercase; } 

        .lib-es { font-size: 13px; color: var(--txt-sec); margin-top: 2px; text-transform: uppercase; } 

        .prog-track { width: 100%; height: 4px; background: var(--bg-input); }

        .prog-fill { height: 100%; width: 0%; }

        .lvl-1 .prog-fill { background: var(--danger); } .lvl-2 .prog-fill { background: var(--c-irreg); }

        .lvl-3 .prog-fill { background: var(--primary); } .lvl-4 .prog-fill { background: var(--success); }

        .lib-badge { position: absolute; right: 15px; top: 15px; font-size: 10px; font-weight: bold; padding: 2px 6px; border-radius: 4px; background: var(--bg-input); color: var(--txt-sec); }

        .load-more-btn { width: 100%; padding: 15px; background: var(--bg-card); border: 1px solid var(--border); color: var(--txt-main); border-radius: 12px; margin-top: 10px; cursor: pointer; font-weight: 700; font-size: 12px; letter-spacing: 1px; flex-shrink: 0; }

        .banned-grid { display: grid; gap: 8px; max-height: 200px; overflow-y: auto; }

        .banned-item { display: flex; justify-content: space-between; align-items: center; background: rgba(239, 68, 68, 0.1); border: 1px solid var(--danger); padding: 10px 14px; border-radius: 8px; font-size: 14px; cursor: pointer; transition: 0.2s; }

        .banned-item:hover { background: var(--danger); color: white; }

        .banned-item span { font-weight: 700; text-transform: uppercase; }

        .banned-icon { font-size: 12px; }



        /* QUEUE */

        .queue-grid { display: grid; gap: 8px; }

        .queue-item { display: flex; justify-content: space-between; align-items: center; background: var(--bg-deep); border: 1px solid var(--border); padding: 10px 14px; border-radius: 8px; font-size: 14px; }

        .queue-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }

        .phase-badge { font-size: 10px; font-weight: 800; padding: 4px 8px; border-radius: 6px; background: var(--danger); color: #fff; }

        .phase-badge.review { background: var(--success); }

        .batch-progress { height: 6px; background: var(--bg-input); border-radius: 3px; overflow: hidden; margin-top: 8px; }

        .batch-progress-fill { height: 100%; background: var(--primary); transition: width 0.6s ease; width: 0%; }

        .scope-bar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; background: var(--bg-input); padding: 8px 12px; border-radius: 8px; border: 1px solid var(--border); }

        .scope-label { font-size: 11px; font-weight: 700; color: var(--txt-sec); text-transform: uppercase; }

        .scope-reset { font-size: 10px; font-weight: 800; color: var(--primary); background: none; border: none; cursor: pointer; text-transform: uppercase; }



        /* RESUME */

        .resume-banner { background: linear-gradient(135deg, var(--success), #047857); color: white; padding: 15px; border-radius: 16px; margin-bottom: 20px; text-align: center; font-weight: 800; letter-spacing: 1px; cursor: pointer; box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4); border: 1px solid #34d399; display: none; animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }

        .resume-banner:active { transform: scale(0.98); opacity: 0.9; }

        @keyframes popIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }



        /* GAME UI (COMPACTO) */

        .game-top-bar { display: flex; justify-content: space-between; align-items: center; margin: 0 0 10px 0; z-index: 60; position: relative; flex-shrink: 0; gap:5px; flex-wrap:wrap; }

        

        .cat-phase-group { 

            display: flex; 

            gap: 4px; 

            align-items: center; 

        }

        .stage-pill { 

            display: inline-flex; 

            padding: 4px 8px; 

            border-radius: 6px; 

            font-size: 10px; 

            font-weight: 700; 

            background: var(--bg-card); 

            border: 1px solid var(--border); 

            color: var(--txt-sec); 

            text-transform: uppercase; 

            letter-spacing: 0.5px; 

            white-space: nowrap; 

            max-width: 100px; 

            overflow: hidden;

            text-overflow: ellipsis;

        }

        .phase-pill { 

            font-size: 9px; 

            font-weight: 800; 

            padding: 4px 6px; 

            border-radius: 6px; 

            background: var(--danger); 

            color: #fff; 

            text-transform: uppercase; 

            border: 1px solid rgba(255,255,255,0.2); 

            transition: background 0.3s; 

            white-space: nowrap;

        }

        .phase-pill.review { background: var(--success); }



        .timer-badge { font-family: var(--font-code); font-size: 12px; color: var(--primary); background: rgba(59, 130, 246, 0.1); padding: 5px 12px; border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3); margin-left: auto; font-weight: bold; }

        .audio-toggle-btn { background: var(--bg-card); border: 1px solid var(--border); width: 48px; height: 48px; border-radius: 12px; color: var(--txt-sec); display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.2s; margin-right: 15px; }

        .audio-toggle-btn.active { background: var(--bg-input); color: var(--primary); border-color: var(--primary); box-shadow: 0 0 15px rgba(59, 130, 246, 0.2); }

        .mini-chart { width: 48px; height: 48px; border-radius: 50%; background: var(--bg-card); display: flex; align-items: center; justify-content: center; position: relative; box-shadow: 0 4px 12px rgba(0,0,0,0.5); }

        .chart-hole { width: 38px; height: 38px; background: var(--bg-deep); border-radius: 50%; display: flex; align-items: center; justify-content: center; z-index: 2; }

        #chart-pct { font-size: 10px; font-weight: 800; font-family: var(--font-code); color: var(--txt-main); }



        /* ARCADE */

        #mode-arcade { flex: 1; display: flex; flex-direction: column; position: relative; overflow: hidden; height: 100%; }

        #game-canvas-container { 

            flex: 1; position: relative; width: 100%; background: #050505; border-radius: 16px; border: 1px solid var(--border); overflow: hidden; margin-bottom: 20px; 

            box-shadow: inset 0 0 30px rgba(0,0,0,0.8); 

            transition: background 1.5s ease;

        }

        #game-canvas-container.learning { background: linear-gradient(to bottom, #1a0505, #050505); }

        #game-canvas-container.review { background: linear-gradient(to bottom, #050a1a, #050505); }

        canvas { display: block; width: 100%; height: 100%; }

        .answers-grid { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; gap: 15px; height: 180px; flex-shrink: 0; padding: 10px; position: relative; align-items: stretch; }

        

        .ban-btn-arcade { position: absolute !important; z-index: 999 !important; top: 50% !important; left: 50% !important; transform: translate(-50%, -50%) !important; margin: 0 !important; width: 64px; height: 64px; border-radius: 50%; background: var(--bg-deep); border: 2px solid var(--danger); color: var(--danger); display: flex; align-items: center; justify-content: center; cursor: pointer; box-shadow: 0 0 0 4px var(--bg-deep), 0 0 20px rgba(0,0,0,0.5); font-size: 24px; animation: jellyPulseCenter 1.5s infinite ease-in-out !important; }

        .ban-btn-arcade.is-banning { animation: none !important; background: var(--danger) !important; color: #fff !important; box-shadow: 0 0 30px var(--danger), inset 0 0 10px rgba(255,255,255,0.5) !important; transform: translate(-50%, -50%) scale(1.1) !important; border-color: #fff !important; }

        .ans-btn { position: relative; background: rgba(30, 30, 35, 0.6); border: 1px solid rgba(255, 255, 255, 0.1); color: var(--txt-main); padding: 12px; border-radius: 18px; font-size: 16px; font-weight: 700; letter-spacing: 0.5px; text-align: center; cursor: pointer; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 10px rgba(0,0,0,0.2); backdrop-filter: blur(10px); text-shadow: 0 2px 4px rgba(0,0,0,0.3); overflow: hidden; text-transform: uppercase; transition: background-color 0.4s ease, border-color 0.4s ease, transform 0.2s ease, box-shadow 0.4s ease; }

        .ans-btn:active { transform: scale(0.96); }

        .ans-btn.correct-flash { background-color: var(--success) !important; color: #fff !important; border-color: #34d399 !important; box-shadow: 0 0 20px rgba(16, 185, 129, 0.6) !important; z-index: 10; transform: scale(1.05); }

        .ans-btn.error-flash { background-color: var(--danger) !important; color: #fff !important; border-color: #f87171 !important; box-shadow: 0 0 20px rgba(239, 68, 68, 0.6) !important; animation: shake 0.4s; }

        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-6px); } 75% { transform: translateX(6px); } }



        /* TEXT MODE */

        #mode-text { flex: 1; display: none; flex-direction: column; width: 100%; height: 100%; overflow-y: auto; padding-top: 20px; }

        .word-stage { margin: 10px 0 30px 0; text-align: center; position: relative; }

        .main-word { font-size: clamp(36px, 10vw, 64px); font-weight: 800; line-height: 1; color: var(--txt-main); margin: 0; transition: color 0.3s; text-transform: uppercase; }

        .main-word.audio-active { color: var(--primary); cursor: pointer; }

        .input-list { display: flex; flex-direction: column; gap: 16px; margin-bottom: 20px; }

        .input-group { position: relative; }

        .input-tag { position: absolute; top: 14px; left: 16px; font-size: 10px; font-weight: 700; color: var(--txt-sec); opacity: 0.7; pointer-events: none; text-transform: uppercase; }

        .smart-input { width: 100%; background: var(--bg-card); border: 1px solid var(--border); border-radius: 16px; padding: 32px 16px 14px 16px; font-family: var(--font-code); font-size: 18px; color: var(--txt-main); text-transform: uppercase; }

        .smart-input:focus { border-color: var(--primary); background: var(--bg-hover); }

        .input-group.correct .smart-input { border-color: var(--success); color: var(--success); }

        .input-group.error .smart-input { border-color: var(--danger); color: var(--danger); }

        .input-ban-btn { position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: none; border: none; font-size: 20px; cursor: pointer; z-index: 5; opacity: 0.7; transition: 0.2s; }

        .input-ban-btn:active { transform: translateY(-50%) scale(0.9); opacity: 1; }

        .action-btn { width: 100%; padding: 20px; border-radius: 16px; border: none; background: var(--bg-input); color: var(--txt-sec); font-family: var(--font-head); font-size: 24px; cursor: not-allowed; transition: 0.3s; margin-top: auto; }

        .action-btn.active { background: var(--primary); color: #fff; cursor: pointer; box-shadow: 0 4px 20px rgba(59, 130, 246, 0.4); }

        .hint-btn { background: none; border: none; color: var(--primary); font-size: 12px; font-weight: 700; letter-spacing: 1px; cursor: pointer; margin-top: 15px; display: inline-block; opacity: 0.8; }

        .hint-text { display: none; margin-top: 15px; font-size: 14px; color: var(--txt-sec); font-style: italic; line-height: 1.5; background: var(--bg-input); padding: 15px; border-radius: 12px; }

        .space-ray { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100; background: linear-gradient(90deg, red, orange, yellow, green, blue, indigo, violet); opacity: 0; mix-blend-mode: screen; }

        @keyframes fireRay { 0% { opacity: 0; transform: scaleX(0); } 10% { opacity: 1; transform: scaleX(1); } 50% { opacity: 1; } 100% { opacity: 0; transform: scaleX(2); } }

        .ray-active { animation: fireRay 0.6s ease-out forwards; }



        /* ANIMATIONS */

        @keyframes jellyPulse { 0%, 100% { transform: scale(1); box-shadow: 0 0 10px currentColor, inset 0 0 5px currentColor; } 50% { transform: scale(1.08); box-shadow: 0 0 25px currentColor, inset 0 0 15px currentColor; } }

        @keyframes jellyPulseCenter { 0%, 100% { transform: translate(-50%, -50%) scale(1); box-shadow: 0 0 10px currentColor, inset 0 0 5px currentColor; } 50% { transform: translate(-50%, -50%) scale(1.08); box-shadow: 0 0 25px currentColor, inset 0 0 15px currentColor; } }

        .mini-chart { color: var(--primary); animation: jellyPulse 3s infinite ease-in-out; border: none; background: rgba(59, 130, 246, 0.1); }

        .chart-hole { box-shadow: inset 0 0 10px rgba(0,0,0,0.8); }

        .ban-btn-arcade { color: var(--danger); border: none; background: rgba(239, 68, 68, 0.1); animation: jellyPulseCenter 1.5s infinite ease-in-out !important; }



        /* GAMIFICATION */

        .coin-wallet { display:flex; gap:10px; margin-left:15px; align-items:center; }

        .coin-slot { position: relative; width: 32px; height: 32px; perspective: 1000px; }

        .coin { width: 100%; height: 100%; border-radius: 50%; transform-style: preserve-3d; animation: spinCoin 4s infinite linear; box-shadow: 0 4px 10px rgba(0,0,0,0.5); }

        .coin.silver { background: linear-gradient(135deg, #e2e8f0, #94a3b8); border: 2px solid #cbd5e1; color: #475569; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 10px; font-family: var(--font-code); }

        .coin.gold { background: linear-gradient(135deg, #fcd34d, #d97706); border: 2px solid #fbbf24; color: #78350f; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 10px; font-family: var(--font-code); animation-duration: 3s; }

        .coin-val { position:absolute; bottom:-12px; left:0; width:100%; text-align:center; font-size:10px; font-weight:800; color:var(--txt-sec); font-family:var(--font-code); }

        @keyframes spinCoin { 0% { transform: rotateY(0deg); } 100% { transform: rotateY(360deg); } }

        #reward-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: none; align-items: center; justify-content: center; z-index: 2000; pointer-events: none; }

        .reward-msg { font-family: var(--font-head); font-size: 60px; color: #fff; text-shadow: 0 0 20px rgba(255,255,255,0.5), 4px 4px 0 #000; transform: scale(0); animation: rewardPop 1.5s forwards; text-align: center; }

        .reward-sub { font-size: 20px; color: var(--gold); font-family: var(--font-code); background: rgba(0,0,0,0.8); padding: 5px 15px; border-radius: 8px; margin-top: 10px; display: inline-block; }

        @keyframes rewardPop { 0% { transform: scale(0) rotate(-10deg); opacity: 0; } 20% { transform: scale(1.2) rotate(5deg); opacity: 1; } 40% { transform: scale(1) rotate(0deg); } 80% { transform: scale(1) translateY(0); opacity: 1; } 100% { transform: scale(1.5) translateY(-50px); opacity: 0; } }

        

        /* REST & OVERLAYS */

        .rest-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(5, 5, 5, 0.85); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; opacity: 0; pointer-events: none; transition: opacity 1.1s ease; backdrop-filter: blur(5px); }

        .rest-overlay.active { opacity: 1; pointer-events: auto; }

        .rest-icon { font-size: 50px; margin-bottom: 10px; animation: breathe 3s infinite ease-in-out; }

        .rest-text { font-family: var(--font-head); font-size: 32px; color: var(--success); letter-spacing: 2px; }

        .rest-sub { font-family: var(--font-ui); font-size: 14px; color: var(--txt-sec); margin-top: 5px; }

        @keyframes breathe { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.2); opacity: 1; } }



        /* MASTERED OVERLAY & EFFECTS */

        .mastered-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); font-family: var(--font-head); font-size: 60px; color: var(--gold); text-shadow: 0 0 30px var(--gold), 0 0 60px var(--gold); pointer-events: none; opacity: 0; z-index: 100; animation: masteredPop 2s ease-out forwards; }

        @keyframes masteredPop { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0.5); } 50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2); } 100% { opacity: 0; transform: translate(-50%, -70%) scale(1); } }

        .phase-wave { position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; pointer-events: none; opacity: 0; animation: phaseWave 1.5s ease-out forwards; }

        @keyframes phaseWave { 0% { width: 0; height: 0; opacity: 0.8; } 100% { width: 2000px; height: 2000px; opacity: 0; transform: translate(-50%, -50%); } }

        

        /* EFECTO STAR WARS CRAWL */

        .sw-stage { 

            perspective: 400px; 

            height: 160px; 

            width: 100%; 

            overflow: hidden; 

            margin: 10px 0 20px 0; 

            position: relative; 

            mask-image: linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%); 

            -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 20%, black 80%, transparent 100%);

        }

        .sw-content { 

            position: absolute; top: 100%; left: 0; width: 100%; text-align: center; 

            color: var(--gold); font-family: var(--font-head); font-size: 40px; 

            letter-spacing: 3px; line-height: 1.1;

            text-shadow: 0 0 10px rgba(251, 191, 36, 0.5);

            transform-origin: 50% 100%; 

        }

        @keyframes crawlAnimation {

            0% { top: 100%; transform: rotateX(25deg) translateZ(0) scale(1); opacity: 0; }

            15% { opacity: 1; }

            100% { top: -300%; transform: rotateX(25deg) translateZ(-500px) scale(0.8); opacity: 0; }

        }



        /* MIC INDICATOR */

        #mic-indicator {

            position: absolute; top: 80px; left: 50%; transform: translateX(-50%);

            font-size: 16px; color: #fff; background: rgba(59, 130, 246, 0.9);

            padding: 8px 16px; border-radius: 20px; z-index: 90; pointer-events: none;

            opacity: 0; transition: opacity 0.3s; font-weight: 700; letter-spacing: 1px;

            box-shadow: 0 0 20px var(--primary);

            display: flex; align-items: center; gap: 8px;

        }

        .mic-dot { width: 10px; height: 10px; background: #fff; border-radius: 50%; animation: micPulse 1s infinite; }

        @keyframes micPulse { 0% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.3); opacity: 0.5; } 100% { transform: scale(1); opacity: 1; } }

    </style>

</head>

<body class="is-home">



    <script src="https://paradisonetworx.com/database.js"></script>



    <div id="text-space-ray" class="space-ray"></div>

    

    <div id="reward-overlay">

        <div>

            <div id="reward-title" class="reward-msg">SESSION CLEAR!</div>

            <div style="text-align:center"><span id="reward-desc" class="reward-sub">+1 SILVER COIN</span></div>

        </div>

    </div>



    <div id="mastered-overlay" class="rest-overlay" style="z-index: 3000; background: rgba(5,5,5,0.95);">

        <div class="rest-icon" style="filter: drop-shadow(0 0 20px var(--gold));">üèÜ</div>

        <div class="rest-text" style="color: var(--gold); text-shadow: 0 0 30px rgba(251, 191, 36, 0.5); font-size:40px;">MASTERED!</div>

        

        <div class="sw-stage">

            <div id="sw-list" class="sw-content"></div>

        </div>

        

        <button id="btn-replay-folder" class="action-btn active" style="width: auto; padding: 15px 40px; background: var(--gold); color: #000; font-weight: 800; border: none; margin-bottom: 15px; box-shadow: 0 0 20px rgba(251, 191, 36, 0.4);">

            ‚Ü∫ REPLAY & RESET

        </button>

        

        <button onclick="document.getElementById('mastered-overlay').classList.remove('active')" class="hint-btn" style="color: #fff; opacity: 0.5;">

            CLOSE

        </button>

    </div>



    <header>

        <div class="brand-area" onclick="App.headerBack()">

            <svg class="back-btn" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"></path></svg>

            <div class="brand">LINGUA NEXUS</div>

        </div>

        <div class="header-actions">

            <button class="icon-btn" onclick="Profile.toggleTheme()">

                <svg id="theme-icon" width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>

            </button>

            <button id="btn-settings-nav" class="icon-btn" onclick="App.nav('settings')">

                <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l-.06.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path></svg>

            </button>

        </div>

    </header>



    <main>

        <div id="view-home" class="view-screen active">

            <div class="welcome-text"><h1>TRAINING HUB</h1></div>

            <div class="global-progress"><div class="global-progress-fill" id="global-progress-fill"></div></div>

            <div id="home-resume-btn" class="resume-banner" onclick="App.resumeGame()" style="display:none; margin-bottom:20px; background:linear-gradient(135deg, var(--gold), #d97706); border-color:#fbbf24; text-shadow:0 1px 2px rgba(0,0,0,0.3);">‚èØ RESUME: <span id="resume-lbl">GAME</span></div>

            <div class="stats-row">

                <div class="stat-pill"><span class="stat-val" style="color:var(--success)" id="stat-m">0</span><span class="stat-lbl">Mastered</span></div>

                <div class="stat-pill"><span class="stat-val" style="color:var(--c-noun)" id="stat-t">0%</span><span class="stat-lbl">Global Mastery</span></div>

            </div>

            <div style="background:var(--bg-card); padding:15px; border-radius:16px; margin-bottom:20px; border:1px solid var(--border); display:flex; justify-content:space-between; align-items:center;">

                <span style="font-size:12px; font-weight:700; color:var(--txt-sec); letter-spacing:1px;">YOUR LOOT</span>

                <div class="coin-wallet">

                    <div class="coin-slot"><div class="coin gold">G</div><div id="menu-coin-g" class="coin-val">0</div></div>

                    <div class="coin-slot"><div class="coin silver">S</div><div id="menu-coin-s" class="coin-val">0</div></div>

                </div>

            </div>

            <div class="grid-menu">

                <div class="menu-card" data-type="noun" onclick="App.start('nouns')"><div class="card-icon">N</div><div><h3>NOUNS</h3><span>Objects & Things</span></div></div>

                <div class="menu-card" data-type="adj" onclick="App.start('adjectives')"><div class="card-icon">A</div><div><h3>ADJECTIVES</h3><span>Descriptions</span></div></div>

                <div class="menu-card" data-type="reg" onclick="App.start('verbs_reg')"><div class="card-icon">R</div><div><h3>REGULAR</h3><span>Standard Verbs</span></div></div>

                <div class="menu-card" data-type="irreg" onclick="App.start('verbs_irreg')"><div class="card-icon">I</div><div><h3>IRREGULAR</h3><span>Complex Forms</span></div></div>

                <div class="menu-card" data-type="func" onclick="App.start('functionals')"><div class="card-icon">L</div><div><h3>LOGIC & SYNTAX</h3><span>Connectors & Structure</span></div></div>

                <div class="menu-card" data-type="folder" onclick="App.nav('folders')"><div class="card-icon" style="color:var(--gold)">F</div><div><h3>MY FOLDERS</h3><span>Custom Collections</span></div></div>

            </div>

        </div>



        <div id="view-folders" class="view-screen">

            <div class="section-box" style="border-color: var(--gold);">

                <div class="section-head" style="color: var(--gold);">SELECT A FOLDER</div>

                <div id="folder-list-container" class="folder-grid"></div>

            </div>

        </div>



        <div id="view-settings" class="view-screen">

            <div id="resume-banner" class="resume-banner" onclick="App.resumeGame()">‚ñ∂ RESUME SESSION</div>

            <div class="section-box" style="border-color: var(--c-noun);">

                <div class="section-head" style="color: var(--c-noun);">INTERACTION MODE</div>

                <div class="row-ctrl">

                    <span class="row-lbl">Play Style</span>

                    <select id="cfg-interaction" class="num-inp" style="width:220px; text-align:left;" onchange="Profile.saveCfg()">

                        <option value="arcade">ARCADE (Game & Physics)</option>

                        <option value="text">TEXT (Typing & Input)</option>

                    </select>

                </div>

            </div>

            <div class="section-box" style="border-color: var(--c-func);">

                <div class="section-head" style="color: var(--c-func);">ARCADE SETTINGS</div>

                <div class="row-ctrl">

                    <span class="row-lbl">Game Engine</span>

                    <select id="cfg-mode" class="num-inp" style="width:220px; text-align:left;" onchange="Profile.saveCfg()">

                        <option value="meteor">NEON FALL (Classic)</option>

                        <option value="bubble">ZERO GRAVITY (Float)</option>

                        <option value="orbit">ORBITAL DEFENSE (360¬∞)</option>

                        <option value="flower">FLOWER POWER (Falling)</option>

                        <option value="heart">HEART FLOAT (Rising)</option>

                        <option value="butterfly">BUTTERFLY RING (360¬∞)</option>

                    </select>

                </div>

                <div class="row-ctrl"><span class="row-lbl">Game Speed</span><select id="cfg-speed" class="num-inp" onchange="Profile.saveCfg()"><option value="1">Slow</option><option value="2">Normal</option><option value="3">Fast</option></select></div>

                <div class="row-ctrl"><span class="row-lbl">Voice Mode (Speak Answer)</span><select id="cfg-speaking" class="num-inp" onchange="Profile.saveCfg()"><option value="false">OFF</option><option value="true">ON</option></select></div>

                <div class="row-ctrl">

                    <span class="row-lbl">Voice Difficulty</span>

                    <select id="cfg-voice-diff" class="num-inp" style="width:120px;" onchange="Profile.saveCfg()">

                        <option value="relaxed">Relaxed</option>

                        <option value="normal">Normal</option>

                        <option value="strict">Strict</option>

                    </select>

                </div>

                <div class="row-ctrl"><span class="row-lbl">Brain Rest Mode üß†</span><select id="cfg-rest" class="num-inp" style="width:120px;" onchange="Profile.saveCfg()"><option value="false">OFF</option><option value="true">ON</option></select></div>

            </div>

            <div class="section-box">

                <div class="section-head">SESSION</div>

                <div class="row-ctrl"><span class="row-lbl">Words per Session (Reward Goal)</span><input type="number" id="cfg-count" class="num-inp" value="10" onchange="Profile.saveCfg()"></div>

                <div class="row-ctrl"><span class="row-lbl">Time Limit (Min)</span><input type="number" id="cfg-time" class="num-inp" value="0" onchange="Profile.saveCfg()"></div>

            </div>

            <div class="section-box"><div class="section-head">DANGER ZONE</div><div class="row-ctrl"><span class="row-lbl" style="color:var(--danger)">Reset All Progress</span><button onclick="Profile.wipe()" style="background:var(--danger); color:white; border:none; padding:8px 16px; border-radius:8px; font-weight:bold;">WIPE</button></div></div>

            <div class="section-box" style="border-color: #666;"><div class="section-head" style="color:#aaa">GRAVEYARD (BANNED WORDS)</div><div id="banned-list-container" class="banned-grid"></div></div>

            <div class="section-box" style="border-color: var(--primary);"><div class="section-head" style="color:var(--primary)">UP NEXT IN QUEUE</div><div id="study-queue-list" class="queue-grid"></div></div>

            <div class="scope-bar"><span id="lib-scope-label" class="scope-label">SCOPE: FULL DATABASE</span><button id="btn-scope-reset" class="scope-reset" onclick="App.clearScope()">RESET TO ALL</button></div>

            <input type="text" id="inp-search" class="lib-search" placeholder="Search Database..." onkeyup="App.resetRender()">

            <div class="filter-bar"><button class="filter-btn active" onclick="App.setLibFilter('all', this)">ALL</button><button class="filter-btn" onclick="App.setLibFilter(0, this)">LVL 0</button><button class="filter-btn" onclick="App.setLibFilter(1, this)">LVL 1</button><button class="filter-btn" onclick="App.setLibFilter(2, this)">LVL 2</button><button class="filter-btn" onclick="App.setLibFilter(3, this)">LVL 3</button><button class="filter-btn" onclick="App.setLibFilter(4, this)">LVL 4</button></div>

            <div id="lib-list" style="padding-bottom:20px;"></div><button id="btn-load-more" class="load-more-btn" onclick="App.renderMore()">LOAD MORE...</button>

        </div>



        <div id="view-game" class="view-screen">

            <div class="game-top-bar">

                <div class="cat-phase-group">

                    <div class="stage-pill" id="game-cat-pill">CATEGORY</div>

                    <div class="phase-pill" id="game-phase-pill">LEARN</div>

                </div>

                <div class="coin-wallet" style="flex:1; justify-content:center; padding:0 5px;">

                    <div class="coin-slot"><div class="coin gold">G</div><div id="game-coin-g" class="coin-val">0</div></div>

                    <div class="coin-slot"><div class="coin silver">S</div><div id="game-coin-s" class="coin-val">0</div></div>

                </div>

                <div class="timer-badge" id="game-timer" style="display:none">00:00</div>

                <button id="btn-audio-mode" class="audio-toggle-btn active" onclick="App.toggleAudioMode()">

                    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M11 5L6 9H2v6h4l5 4V5z"></path><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path><path d="M19.07 4.93a10 10 0 0 1 0 14.14"></path></svg>

                </button>

                <div class="mini-chart" id="game-chart"><div class="chart-hole"><span id="chart-pct">0%</span></div></div>

            </div>

            

            <div id="mode-arcade">

                <div id="game-canvas-container">

                    <div id="mic-indicator"><div class="mic-dot"></div> SPEAK NOW</div>

                    <canvas id="game-canvas"></canvas>

                </div>

                <div class="answers-grid" id="control-dock"></div>

                <div id="brain-rest-layer" class="rest-overlay"><div class="rest-icon">üß†</div><div class="rest-text" id="rest-title">RELAX</div><div class="rest-sub" id="rest-msg">Breathe in...</div></div>

            </div>



            <div id="mode-text">

                <div class="word-stage"><h2 class="main-word" id="text-word" onclick="TextGame.replayAudio()">...</h2></div>

                <div class="input-list" id="text-inputs"></div>

                <button id="btn-text-action" class="action-btn" onclick="TextGame.checkOrNext()">CHECK ANSWER</button>

                <div style="text-align:center; margin-top:10px;">

                    <button id="btn-hint" class="hint-btn" onclick="TextGame.getHint()">üí° SHOW DEFINITION HINT</button>

                    <div id="hint-text" class="hint-text"></div>

                </div>

            </div>

        </div>

    </main>






    </body>

</html>
