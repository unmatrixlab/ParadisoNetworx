<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>MDC ENG</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
    --primary: #4f46e5;
    --primary-hover: #4338ca;
    --accent: #ec4899;
    --selected-word: #ef4444;
    --nav-active: #2563eb;
    --bg-body: #f3f4f6;
    --card-bg: #ffffff;
    --text-main: #1f2937;
    --text-sec: #6b7280;
    --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --radius: 12px;
    --header-height: 60px;
}
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
body { margin: 0; font-family: 'Inter', sans-serif; background: var(--bg-body); color: var(--text-main); padding-top: var(--header-height); padding-bottom: 120px; }

#mdc-header {
    position: fixed;
    top: 0; left: 0; width: 100%;
    height: var(--header-height);
    background: rgba(31, 41, 55, 0.85);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    color: white;
    z-index: 1000;
    display: flex;
    align-items: center;
    justify-content: center;
    border-bottom: 1px solid rgba(255,255,255,0.08);
}
#mdc-header a {
    text-decoration: none;
    font-weight: 800;
    font-size: 18px;
    letter-spacing: 1px;
    background: linear-gradient(to right, #fff, #a5b4fc);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    transition: opacity 0.2s;
}
#mdc-header a:hover { opacity: 0.8; }

.page-max-width { max-width: 600px; margin: 0 auto; width: 100%; position: relative; }
.video-wrapper { position: sticky; top: var(--header-height); width: 100%; background: #000; z-index: 500; box-shadow: var(--shadow); }
.video-inner { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; }
.video-inner iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; }
.dialogue-container { padding: 20px 15px 80px 15px; }
.line { background: var(--card-bg); border-radius: var(--radius); padding: 18px; margin-bottom: 16px; box-shadow: var(--shadow); border-left: 4px solid transparent; transition: 0.2s; }
.line.active { border-left-color: var(--primary); background-color: #eef2ff; transform: scale(1.02); }
.line-content { display: flex; gap: 15px; align-items: flex-start; }
.text-block { flex: 1; }
.english { font-size: 1.05rem; font-weight: 600; line-height: 1.6; color: var(--text-main); margin-bottom: 6px; }
.spanish { font-size: 0.95rem; color: var(--text-sec); border-top: 1px solid #eee; padding-top: 6px; display: none; line-height: 1.4; }
.spanish.visible { display: block; animation: fadeIn 0.3s ease; }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.word-interactive { border-radius: 3px; padding: 0 1px; cursor: pointer; display: inline-block; }
.word-interactive:hover { background-color: rgba(0,0,0,0.05); }
.word-interactive.english-word.selected-word { color: var(--selected-word); font-weight: 800; text-decoration: underline; text-decoration-thickness: 2px; text-decoration-color: rgba(239, 68, 68, 0.3); }
.word-interactive.english-word.nav-active-word { color: var(--nav-active) !important; text-decoration-color: var(--nav-active) !important; background-color: rgba(37, 99, 235, 0.1); border-radius: 4px; }
.word-interactive.spanish-word.selected-word { color: #be123c; font-weight: 700; }
.controls { display: flex; flex-direction: column; gap: 8px; min-width: 80px; }
.btn { border: none; border-radius: 8px; padding: 8px 0; font-size: 13px; font-weight: 600; cursor: pointer; width: 100%; }
.playBtn { background-color: var(--primary); color: white; }
.playBtn:hover { background-color: var(--primary-hover); }
.speakBtn { background-color: #e5e7eb; color: var(--text-main); }
.speakBtn:hover { background-color: #d1d5db; }
#control-bar { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); background: rgba(31, 41, 55, 0.95); backdrop-filter: blur(8px); color: white; padding: 6px 12px; border-radius: 50px; display: flex; align-items: center; gap: 8px; box-shadow: 0 6px 20px rgba(0,0,0,0.25); z-index: 900; min-width: 280px; justify-content: space-between; }
.bar-btn { background: transparent; border: none; color: white; width: 36px; height: 36px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 18px; cursor: pointer; }
.bar-btn:hover { background: rgba(255,255,255,0.2); }
.bar-btn.disabled { opacity: 0.3; pointer-events: none; }
.bar-divider { width: 1px; height: 20px; background: rgba(255,255,255,0.2); }
.nav-count { font-size: 13px; font-weight: 600; color: #e5e7eb; min-width: 40px; text-align: center; }
</style>
</head>
<body>
<div id="mdc-header"><a href="https://paradisonetworx.com/mdceng.html">MDC ENG</a></div>
<div class="page-max-width">
<div class="video-wrapper"><div class="video-inner"><div id="player"></div></div></div>
<div class="dialogue-container">
<div class="line" data-time="1.43">
  <div class="line-content">
    <div class="text-block">
      <div class="english">(gentle ambient synth music)</div>
      <div class="spanish">(mÃºsica ambiental suave con sintetizadores)</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="14.07">
  <div class="line-content">
    <div class="text-block">
      <div class="english">(rhythmic bass guitar music)</div>
      <div class="spanish">(mÃºsica rÃ­tmica de bajo)</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="21.97">
  <div class="line-content">
    <div class="text-block">
      <div class="english">(upbeat rock music)</div>
      <div class="spanish">(mÃºsica rock animada)</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="38.50">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª [Jon] Once upon a time not so long ago â™ª</div>
      <div class="spanish">â™ª [Jon] Ã‰rase una vez, no hace tanto tiempo â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="45.53">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Tommy used to work on the docks â™ª</div>
      <div class="spanish">â™ª Tommy solÃ­a trabajar en los muelles â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="49.67">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Union's been on strike â™ª</div>
      <div class="spanish">â™ª El sindicato estÃ¡ en huelga â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="51.20">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª He's down on his luck, it's tough â™ª</div>
      <div class="spanish">â™ª EstÃ¡ pasando por una mala racha, es duro â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="56.83">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª So tough â™ª</div>
      <div class="spanish">â™ª Tan duro â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="61.43">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Gina works the diner all day â™ª</div>
      <div class="spanish">â™ª Gina trabaja en el restaurante todo el dÃ­a â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="65.27">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Working for her man â™ª</div>
      <div class="spanish">â™ª Trabajando para su hombre â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="67.10">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª She brings home her pay for love â™ª</div>
      <div class="spanish">â™ª Ella trae a casa su paga por amor â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="71.47">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Ooh, for love â™ª</div>
      <div class="spanish">â™ª Â¡Oh, por amor! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="75.73">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª She says, "We've gotta hold on to what we've got â™ª</div>
      <div class="spanish">â™ª Ella dice: "Tenemos que aferrarnos a lo que tenemos" â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="80.77">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª "It doesn't make a difference if we make it or not â™ª</div>
      <div class="spanish">â™ª "Da igual si lo hacemos o no â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="84.87">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª "We've got each other and that's a lot â™ª</div>
      <div class="spanish">â™ª "Nos tenemos el uno al otro y eso es mucho" â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="88.40">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª "For love, we'll give it a shot" â™ª</div>
      <div class="spanish">â™ª "Por amor, lo intentaremos" â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="92.80">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Oh, we're half-way there â™ª</div>
      <div class="spanish">â™ª Â¡Oh, ya estamos a mitad de camino! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="96.67">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Oh, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Oh, viviendo de una oraciÃ³n â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="100.53">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Take my hand, we'll make it I swear â™ª</div>
      <div class="spanish">â™ª Toma mi mano, lo lograremos, te lo juro â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="104.37">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Oh, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Oh, viviendo de una oraciÃ³n â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="112.30">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Tommy's got his six string in hock â™ª</div>
      <div class="spanish">â™ª Tommy tiene su guitarra de seis cuerdas empeÃ±ada â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="115.90">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Now he's holding in â™ª</div>
      <div class="spanish">â™ª Ahora se estÃ¡ conteniendo â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="117.77">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª What he used to make it talk so tough â™ª</div>
      <div class="spanish">â™ª Lo que solÃ­a hacer para que hablara tan duro â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="122.37">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Ooh, it's tough â™ª</div>
      <div class="spanish">â™ª Â¡Uf, quÃ© difÃ­cil! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="128.07">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Gina dreams of running away â™ª</div>
      <div class="spanish">â™ª Gina sueÃ±a con huir â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="131.60">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª She cries in the night, Tommy whispers â™ª</div>
      <div class="spanish">â™ª Ella llora en la noche, susurra Tommy â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="134.70">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª "Baby, it's okay â™ª</div>
      <div class="spanish">â™ª "CariÃ±o, estÃ¡ bien â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="138.90">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª "Someday" â™ª</div>
      <div class="spanish">â™ª "AlgÃºn dÃ­a" â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="142.83">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª We've gotta hold on to what we've got â™ª</div>
      <div class="spanish">â™ª Tenemos que aferrarnos a lo que tenemos â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="147.30">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª It doesn't make a difference if we make it or not â™ª</div>
      <div class="spanish">â™ª Da igual si lo hacemos o no â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="151.13">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª We've got each other and that's a lot â™ª</div>
      <div class="spanish">â™ª Nos tenemos el uno al otro y eso es mucho â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="155.03">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª For love, we'll give it a shot â™ª</div>
      <div class="spanish">â™ª Por amor, lo intentaremos â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="159.17">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Oh, we're half-way there â™ª</div>
      <div class="spanish">â™ª Â¡Oh, ya estamos a mitad de camino! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="162.93">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Oh, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Oh, viviendo de una oraciÃ³n â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="166.83">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Take my hand and we'll make it I swear â™ª</div>
      <div class="spanish">â™ª Toma mi mano y lo lograremos, te lo juro â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="170.97">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Oh, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Oh, viviendo de una oraciÃ³n â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="174.80">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Viviendo de una oraciÃ³n â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="194.03">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Ooh â™ª</div>
      <div class="spanish">â™ª Ooh â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="195.53">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª We've gotta hold on ready or not â™ª</div>
      <div class="spanish">â™ª Tenemos que resistir, estemos preparados o no â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="200.00">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª You live for the fight when that's all that you've got â™ª</div>
      <div class="spanish">â™ª Vives para la lucha cuando es lo Ãºnico que tienes â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="203.40">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, we're half-way there â™ª</div>
      <div class="spanish">â™ª Â¡Guau, ya estamos a mitad de camino! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="207.33">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Â¡Uf, viviendo de una oraciÃ³n! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="211.17">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Take my hand and we'll make it, I swear â™ª</div>
      <div class="spanish">â™ª Toma mi mano y lo lograremos, te lo juro â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="215.10">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Â¡Uf, viviendo de una oraciÃ³n! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="218.93">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, we're half-way there â™ª</div>
      <div class="spanish">â™ª Â¡Guau, ya estamos a mitad de camino! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="222.97">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Â¡Uf, viviendo de una oraciÃ³n! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="226.50">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Take my hand and we'll make it I swear â™ª</div>
      <div class="spanish">â™ª Toma mi mano y lo lograremos, te lo juro â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="230.53">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Â¡Uf, viviendo de una oraciÃ³n! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="234.43">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, we're half-way there â™ª</div>
      <div class="spanish">â™ª Â¡Guau, ya estamos a mitad de camino! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="238.37">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Whoa, livin' on a prayer â™ª</div>
      <div class="spanish">â™ª Â¡Uf, viviendo de una oraciÃ³n! â™ª</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>
<div class="line" data-time="242.07">
  <div class="line-content">
    <div class="text-block">
      <div class="english">â™ª Take my hand and we'll make â™ª [music fades out]</div>
      <div class="spanish">â™ª Toma mi mano y haremos â™ª [la mÃºsica se desvanece]</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>

</div></div>
<div id="control-bar">
  <button class="bar-btn disabled" id="btn-prev" onclick="navigateWords(-1)">â–²</button>
  <div class="nav-count" id="nav-counter">0/0</div>
  <button class="bar-btn disabled" id="btn-next" onclick="navigateWords(1)">â–¼</button>
  <div class="bar-divider"></div>
  <button class="bar-btn disabled" id="btn-speak-word" onclick="speakActiveOrSelected()">ğŸ“¢</button>
  <div class="bar-divider"></div>
  <button class="bar-btn" id="btn-smart-pause" onclick="toggleSmartPause()">â±ï¸</button> 
  <button class="bar-btn" id="btn-autoscroll" onclick="toggleAutoScroll()" style="color: #4f46e5;">ğŸ“œ</button>
  <button class="bar-btn" id="btn-toggle-trans" onclick="toggleAllTranslations()">ğŸ‘ï¸</button>
  <button class="bar-btn disabled" id="btn-clear" onclick="clearAllWords()">ğŸ—‘ï¸</button>
</div>

<script>
const TIME_OFFSET=-0.2, END_PADDING=0.5, TTS_RATE=0.65, TTS_LANG='en-US';
const PAUSE_FACTOR = 2.0; // MODIFICAR AQUI EL TIEMPO DE PAUSA (2.0 = Doble del tiempo del subtitulo)
const YOUTUBE_ID = 'lDK9QqIzhwk';
const STORAGE_KEY_ENG='mdc_eng_'+YOUTUBE_ID, STORAGE_KEY_ESP='mdc_esp_'+YOUTUBE_ID, STORAGE_KEY_TIME='mdc_time_'+YOUTUBE_ID;
let player, checkInterval, isSegmentPlaying=false, segmentEndTime=0, scrollEnabled=true, autoScroll=true;
let engSelection=[], activeWordID=null;
let smartPause = false;
let isSmartPausing = false;
let pauseTimer = null;

function initInteractiveWords() {
  engSelection = JSON.parse(localStorage.getItem(STORAGE_KEY_ENG) || '[]');
  const savedEsp = JSON.parse(localStorage.getItem(STORAGE_KEY_ESP) || '[]');
  let engIndex = 0;
  document.querySelectorAll('.english').forEach(el => {
    el.innerHTML = el.innerText.split(' ').map(word => {
      const span = `<span class="word-interactive english-word" data-lang="en" data-idx="${engIndex}" onclick="toggleWordSelection(this, event)">${word}</span>`;
      engIndex++; return span;
    }).join(' ');
  });
  let espIndex = 0;
  document.querySelectorAll('.spanish').forEach(el => {
    el.innerHTML = el.innerText.split(' ').map(word => {
      const isSelected = savedEsp.includes(espIndex);
      const cssClass = `word-interactive spanish-word ${isSelected ? 'selected-word' : ''}`;
      const span = `<span class="${cssClass}" data-lang="es" data-idx="${espIndex}" onclick="toggleWordSelection(this, event)">${word}</span>`;
      espIndex++; return span;
    }).join(' ');
  });
  renderWordStates();
}
document.addEventListener('DOMContentLoaded', initInteractiveWords);

function toggleSmartPause() {
    smartPause = !smartPause;
    const btn = document.getElementById('btn-smart-pause');
    btn.style.color = smartPause ? '#4f46e5' : 'white';
    btn.style.opacity = smartPause ? '1' : '0.5';
}

function toggleAutoScroll() {
    autoScroll = !autoScroll;
    const btn = document.getElementById('btn-autoscroll');
    btn.style.color = autoScroll ? '#4f46e5' : 'white';
    btn.style.opacity = autoScroll ? '1' : '0.5';
}

function toggleWordSelection(element, event) {
    event.stopPropagation();
    const lang = element.dataset.lang;
    const idx = parseInt(element.dataset.idx);
    if (lang === 'es') {
        element.classList.toggle('selected-word');
        saveSelectionToStorage(STORAGE_KEY_ESP, '.spanish-word.selected-word');
        return;
    }
    if (engSelection.includes(idx)) {
        if (activeWordID === idx) { engSelection = engSelection.filter(id => id !== idx); activeWordID = null; }
        else { activeWordID = idx; }
    } else {
        engSelection.push(idx);
        engSelection.sort((a, b) => a - b);
        activeWordID = idx;
    }
    if (engSelection.length === 0) activeWordID = null;
    localStorage.setItem(STORAGE_KEY_ENG, JSON.stringify(engSelection));
    renderWordStates();
}

function renderWordStates() {
    document.querySelectorAll('.english-word').forEach(el => el.classList.remove('selected-word', 'nav-active-word'));
    engSelection.forEach(idx => {
        const el = document.querySelector(`.english-word[data-idx="${idx}"]`);
        if(el) el.classList.add(idx === activeWordID ? 'nav-active-word' : 'selected-word');
    });
    updateControlBar();
}

function updateControlBar() {
    const counterEl = document.getElementById('nav-counter');
    const total = engSelection.length;
    let currentPos = 0;
    if (activeWordID !== null && total > 0) currentPos = engSelection.indexOf(activeWordID) + 1;
    counterEl.innerText = total === 0 ? "0/0" : `${currentPos}/${total}`;
    const els = ['btn-clear','btn-speak-word','btn-prev','btn-next'];
    els.forEach(id => {
        const btn = document.getElementById(id);
        if(total > 0) btn.classList.remove('disabled'); else btn.classList.add('disabled');
    });
}

function navigateWords(direction) {
    if (engSelection.length === 0) return;
    let currentIndexArray = engSelection.indexOf(activeWordID);
    if (currentIndexArray === -1) currentIndexArray = direction > 0 ? 0 : engSelection.length - 1;
    else {
        currentIndexArray += direction;
        if (currentIndexArray >= engSelection.length) currentIndexArray = 0;
        if (currentIndexArray < 0) currentIndexArray = engSelection.length - 1;
    }
    activeWordID = engSelection[currentIndexArray];
    const targetEl = document.querySelector(`.english-word[data-idx="${activeWordID}"]`);
    if(targetEl) targetEl.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
    renderWordStates();
}

function speakText(text, onStart = null, onEnd = null) {
    window.speechSynthesis.cancel();
    const utter = new SpeechSynthesisUtterance(text);
    utter.lang = TTS_LANG;
    utter.rate = TTS_RATE;
    if(onStart) utter.onstart = onStart;
    if(onEnd) utter.onend = onEnd;
    window.speechSynthesis.speak(utter);
}

function speakActiveOrSelected() {
    if (activeWordID !== null) { speakWordById(activeWordID); return; }
    if (engSelection.length > 0) {
        activeWordID = engSelection[0];
        renderWordStates();
        speakWordById(activeWordID);
    }
}

function speakWordById(idx) {
    const el = document.querySelector(`.english-word[data-idx="${idx}"]`);
    if (el) speakText(el.innerText);
}

function saveSelectionToStorage(key, selector) {
    const selectedElements = document.querySelectorAll(selector);
    const indices = Array.from(selectedElements).map(el => parseInt(el.dataset.idx));
    localStorage.setItem(key, JSON.stringify(indices));
}

function clearAllWords() {
    if(!confirm('Reset all selections?')) return;
    engSelection = []; activeWordID = null;
    localStorage.removeItem(STORAGE_KEY_ENG);
    document.querySelectorAll('.spanish-word.selected-word').forEach(el => el.classList.remove('selected-word'));
    localStorage.removeItem(STORAGE_KEY_ESP);
    renderWordStates();
}

const tag = document.createElement('script');
tag.src = "https://www.youtube.com/iframe_api";
document.getElementsByTagName('script')[0].parentNode.insertBefore(tag, document.getElementsByTagName('script')[0]);

function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
        videoId: YOUTUBE_ID,
        playerVars: { playsinline: 1, rel: 0, modestbranding: 1, controls: 1 },
        events: { 'onReady': onPlayerReady, 'onStateChange': onPlayerStateChange }
    });
}

function onPlayerReady(event) {
    const savedTime = localStorage.getItem(STORAGE_KEY_TIME);
    if (savedTime) player.seekTo(parseFloat(savedTime));
}

function onPlayerStateChange(event) {
    if (event.data === YT.PlayerState.PLAYING) {
        clearInterval(checkInterval);
        checkInterval = setInterval(checkTime, 100);
    } else {
        clearInterval(checkInterval);
        if (player && player.getCurrentTime) localStorage.setItem(STORAGE_KEY_TIME, player.getCurrentTime());
    }
}

let currentSubtitleEnd = -1;

function checkTime() {
    if (!player || !player.getCurrentTime) return;
    const currentTime = player.getCurrentTime();
    if (Math.floor(currentTime) % 5 === 0) localStorage.setItem(STORAGE_KEY_TIME, currentTime);
    
    // Smart Pause Logic
    if (smartPause && !isSmartPausing && !isSegmentPlaying) {
        // Check if we just finished a subtitle line
        // We need to find the current line
        let activeLine = null;
        const lines = document.querySelectorAll('.line');
        
        for(let i=0; i<lines.length; i++) {
            const start = parseFloat(lines[i].dataset.time);
            const next = lines[i+1];
            const end = next ? parseFloat(next.dataset.time) : start + 5;
            
            // If we are near the end of this subtitle (within 0.3s)
            if (currentTime >= end - 0.2 && currentTime < end + 0.2 && currentSubtitleEnd !== end) {
                currentSubtitleEnd = end; // Mark as processed
                isSmartPausing = true;
                player.pauseVideo();
                
                const duration = end - start;
                const pauseDuration = duration * PAUSE_FACTOR * 1000; // Seconds to MS
                
                // Visual indicator
                const btn = document.getElementById('btn-smart-pause');
                btn.innerText = "â³"; 
                
                pauseTimer = setTimeout(() => {
                    player.playVideo();
                    isSmartPausing = false;
                    btn.innerText = "â±ï¸";
                }, pauseDuration);
                break;
            }
        }
    }

    if (isSegmentPlaying && currentTime >= segmentEndTime) {
        player.pauseVideo();
        isSegmentPlaying = false;
        resetButtons();
        scrollEnabled = true;
        return;
    }
    if (scrollEnabled) highlightCurrentLine(currentTime);
}

function highlightCurrentLine(time) {
    const lines = document.querySelectorAll('.line');
    let activeLine = null;
    lines.forEach((line, index) => {
        const start = parseFloat(line.dataset.time);
        const nextLine = lines[index + 1];
        const end = nextLine ? parseFloat(nextLine.dataset.time) : start + 10;
        if (time >= start && time < end) activeLine = line;
        line.classList.remove('active');
    });
    if (activeLine) {
        activeLine.classList.add('active');
        if (autoScroll) {
            const rect = activeLine.getBoundingClientRect();
            const offset = window.pageYOffset + (rect.top + rect.height / 2) - (window.innerHeight / 2) - 40;
            window.scrollTo({ top: offset, behavior: "smooth" });
        }
    }
}

document.querySelectorAll('.playBtn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const line = btn.closest('.line');
        const start = parseFloat(line.dataset.time) + TIME_OFFSET;
        const nextLine = line.nextElementSibling;
        const end = (nextLine ? parseFloat(nextLine.dataset.time) : start + 5) + END_PADDING;
        
        if (btn.dataset.state === 'playing') {
            player.pauseVideo();
            isSegmentPlaying = false;
            resetButtons();
            return;
        }
        resetButtons();
        window.speechSynthesis.cancel();
        document.querySelectorAll('.line.active').forEach(l => l.classList.remove('active'));
        scrollEnabled = false;
        isSegmentPlaying = true;
        segmentEndTime = end;
        player.seekTo(Math.max(0, start), true);
        player.playVideo();
        btn.textContent = "Stop";
        btn.dataset.state = 'playing';
        line.classList.add('active');
    });
});

document.querySelectorAll('.speakBtn').forEach(btn => {
    btn.addEventListener('click', (e) => {
        e.stopPropagation();
        const line = btn.closest('.line');
        const text = line.querySelector('.english').innerText;
        if (btn.dataset.state === 'speaking') {
            window.speechSynthesis.cancel();
            resetButtons();
            return;
        }
        resetButtons();
        window.speechSynthesis.cancel();
        player.pauseVideo();
        speakText(text, () => {
            btn.textContent = "Stop";
            btn.dataset.state = 'speaking';
            document.querySelectorAll('.line.active').forEach(l => l.classList.remove('active'));
            line.classList.add('active');
        }, () => { resetButtons(); });
    });
});

function resetButtons() {
    document.querySelectorAll('.playBtn').forEach(b => { b.textContent = "Play"; b.removeAttribute('data-state'); });
    document.querySelectorAll('.speakBtn').forEach(b => { b.textContent = "Speak"; b.removeAttribute('data-state'); });
}

let allVisible = false;
function toggleAllTranslations() {
    allVisible = !allVisible;
    document.getElementById('btn-toggle-trans').style.color = allVisible ? '#4f46e5' : 'white';
    document.querySelectorAll('.spanish').forEach(span => {
        span.classList.toggle('visible', allVisible);
    });
}
</script>
</body>
</html>
