<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>NEXUS | Stealth V2</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>

    <style>
        /* =========================================
           1. CORE VARIABLES
           ========================================= */
        :root {
            --bg-body: #050505;
            --glass-base: rgba(20, 20, 20, 0.6); 
            --glass-border: rgba(255, 255, 255, 0.08);
            
            /* Colores Neón */
            --neon-1: #0ea5e9; 
            --neon-2: #d946ef; 
            --neon-3: #22c55e; 
            --neon-4: #f59e0b; 
            --neon-5: #6366f1;
            /* NUEVO COLOR PARA EL GENERADOR IA */
            --neon-6: #00f2ea; 

            --ease-snap: cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; outline: none; }

        body {
            background-color: var(--bg-body);
            color: #fff;
            font-family: 'Inter', sans-serif;
            margin: 0;
            height: 100vh;
            overflow-y: auto; 
            overflow-x: hidden;
            padding: 20px 0; 
        }

        body.locked { overflow: hidden; }

        /* =========================================
           2. ITEMS & LIST
           ========================================= */
        .nexus-list {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
            padding-bottom: 50px;
            position: relative;
            z-index: 1;
        }

        .card {
            background: linear-gradient(90deg, rgba(255,255,255,0.03) 0%, rgba(0,0,0,0) 100%);
            border: 1px solid var(--glass-border);
            border-left: 3px solid var(--accent-color-dim, #333); 
            border-radius: 8px;
            margin: 0 16px;
            overflow: hidden;
            position: relative;
            transition: transform 0.2s ease, background 0.3s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        /* Helpers de colores */
        .neon-1 { --accent-color: var(--neon-1); --accent-color-dim: rgba(14, 165, 233, 0.4); }
        .neon-2 { --accent-color: var(--neon-2); --accent-color-dim: rgba(217, 70, 239, 0.4); }
        .neon-3 { --accent-color: var(--neon-3); --accent-color-dim: rgba(34, 197, 94, 0.4); }
        .neon-4 { --accent-color: var(--neon-4); --accent-color-dim: rgba(245, 158, 11, 0.4); }
        .neon-5 { --accent-color: var(--neon-5); --accent-color-dim: rgba(99, 102, 241, 0.4); }
        .neon-6 { --accent-color: var(--neon-6); --accent-color-dim: rgba(0, 242, 234, 0.4); }

        /* =========================================
           3. ESTADO ACTIVO (FIXED MODE)
           ========================================= */
        .card.active {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100dvh;
            z-index: 9999;
            margin: 0;
            border-radius: 0;
            border: none;
            border-left: none;
            background: #000;
            display: flex;
            flex-direction: column;
            animation: expandCard 0.35s var(--ease-snap) forwards;
        }

        @keyframes expandCard {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* =========================================
           4. HEADER
           ========================================= */
        .card-header {
            padding: 20px 24px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            background: transparent;
            border-bottom: 1px solid transparent;
            transition: background 0.3s ease;
        }

        .card.active .card-header {
            background: rgba(10,10,10,0.95);
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .title-group { display: flex; align-items: center; gap: 15px; }

        .card-title {
            font-family: 'Bebas Neue', sans-serif;
            font-size: 24px;
            letter-spacing: 1.5px;
            color: #777; 
            margin: 0;
            transition: color 0.3s ease;
        }

        .card-tag {
            font-family: 'Inter', sans-serif;
            font-size: 9px;
            font-weight: 700;
            letter-spacing: 1px;
            text-transform: uppercase;
            padding: 3px 8px;
            border-radius: 2px;
            background: rgba(255,255,255,0.03);
            color: #444;
            border: 1px solid rgba(255,255,255,0.05);
        }

        .card.active .card-title { color: #fff; }
        
        .card.active .card-tag {
            color: var(--accent-color);
            border-color: var(--accent-color);
            background: rgba(0,0,0,0.5);
            box-shadow: 0 0 10px -2px var(--accent-color);
        }

        .card-icon {
            color: #444;
            transition: transform 0.4s var(--ease-snap), color 0.3s;
        }
        .card.active .card-icon {
            color: #fff;
            transform: rotate(180deg);
        }

        /* =========================================
           5. CONTENIDO
           ========================================= */
        .card-content {
            flex: 1;
            display: none;
            background: #000;
            position: relative;
            /* Modificación: permitir scroll en contenido propio */
            overflow-y: auto; 
        }

        .card.active .card-content {
            display: block;
            animation: fadeInContent 0.5s ease 0.2s forwards;
            opacity: 0;
        }

        @keyframes fadeInContent { to { opacity: 1; } }

        iframe {
            width: 100%;
            height: 100%;
            border: none;
            display: block;
        }

        .sortable-ghost {
            opacity: 0.2;
            border: 1px dashed #fff;
        }

        /* =========================================
           6. ESTILOS ESPECIFICOS PARA GENERADOR IA (Card 6)
           ========================================= */
        .ai-tools-container {
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 20px;
            height: 100%;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .nexus-input {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            color: #fff;
            padding: 15px;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            border-radius: 6px;
            transition: border-color 0.3s;
        }

        .nexus-input:focus {
            border-color: var(--neon-6);
        }

        .btn-group {
            display: flex;
            gap: 10px;
        }

        .nexus-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-family: 'Inter', sans-serif;
            font-weight: 600;
            text-transform: uppercase;
            cursor: pointer;
            letter-spacing: 1px;
            font-size: 12px;
            transition: filter 0.2s;
        }

        .nexus-btn:active { transform: scale(0.98); }

        .btn-copy {
            background: var(--neon-6);
            color: #000;
            box-shadow: 0 0 10px rgba(0, 242, 234, 0.2);
        }

        .btn-paste {
            background: rgba(255,255,255,0.1);
            color: #fff;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .btn-delete {
            background: rgba(255, 50, 50, 0.2);
            color: #ff5555;
            border: 1px solid rgba(255, 50, 50, 0.3);
            max-width: 50px; /* Botón pequeño */
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Área donde se mostrará el acordeón generado */
        #generated-workspace {
            flex: 1;
            border: 1px dashed rgba(255,255,255,0.1);
            border-radius: 8px;
            position: relative;
            background: #0a0a0a;
            overflow: hidden;
        }
        
        /* El iframe generado dentro del workspace */
        #generated-workspace iframe {
            width: 100%;
            height: 100%;
            background: #fff; /* Por si el HTML generado no tiene fondo */
        }

        /* Mensaje de estado */
        .status-msg {
            font-size: 10px;
            color: var(--neon-6);
            margin-top: 5px;
            opacity: 0;
            transition: opacity 0.3s;
        }

    </style>
</head>
<body>

    <div id="nexus-container" class="nexus-list">
    </div>

<script>
    // === 1. DATA ===
    const appData = [
        { id: '1', title: 'PLAYER DECK', tag: 'CORE',  url: 'https://paradisonetworx.com/player91', theme: 'neon-1' },
        { id: '2', title: 'VOCABULARY',  tag: 'STUDY', url: 'https://paradisonetworx.com/voc1',    theme: 'neon-2' },
        { id: '3', title: 'CREATOR',     tag: 'ADMIN', url: 'https://paradisonetworx.com/LinguistDeckCel2.html', theme: 'neon-3' },
        { id: '4', title: 'ARCADE',      tag: 'GAME',  url: 'https://paradisonetworx.com/gamefull3.html',       theme: 'neon-4' },
        { id: '5', title: 'SYSTEM',      tag: 'DATA',  url: 'https://paradisonetworx.com/backup',  theme: 'neon-5' },
        // === NUEVO ITEM 6 ===
        { id: '6', title: 'AI GENERATOR', tag: 'TOOLS', url: '', theme: 'neon-6' }
    ];

    // === 2. RENDERIZADO ===
    function renderApp() {
        const container = document.getElementById('nexus-container');
        const savedOrder = JSON.parse(localStorage.getItem('nexus_sort_v2'));
        
        if (savedOrder) {
            appData.sort((a, b) => savedOrder.indexOf(a.id) - savedOrder.indexOf(b.id));
        }

        container.innerHTML = appData.map(item => {
            // Lógica especial para el Item 6 (Generador)
            let contentHTML = '';

            if (item.id === '6') {
                // Interfaz Custom para Generador
                contentHTML = `
                    <div class="ai-tools-container">
                        <div class="input-group">
                            <input type="text" id="topicInput" class="nexus-input" placeholder="Escribe un tópico (Ej: Irregular Verbs)...">
                            <div class="status-msg" id="statusMsg">Prompt copiado al portapapeles</div>
                        </div>
                        <div class="btn-group">
                            <button class="nexus-btn btn-copy" onclick="copyPrompt()">1. COPIAR PROMPT</button>
                            <button class="nexus-btn btn-paste" onclick="pasteContent()">2. PEGAR CÓDIGO</button>
                            <button class="nexus-btn btn-delete" onclick="deleteContent()">X</button>
                        </div>
                        <div id="generated-workspace">
                            </div>
                    </div>
                `;
            } else {
                // Iframe normal para los demás
                contentHTML = `<iframe data-src="${item.url}"></iframe>`;
            }

            return `
            <div class="card ${item.theme}" data-id="${item.id}">
                <div class="card-header" onclick="toggleCard('${item.id}')">
                    <div class="title-group">
                        <h2 class="card-title">${item.title}</h2>
                        <span class="card-tag">${item.tag}</span>
                    </div>
                    <svg class="card-icon" width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M6 9l6 6 6-6"></path>
                    </svg>
                </div>
                <div class="card-content" id="content-${item.id}">
                    ${contentHTML}
                </div>
            </div>
            `;
        }).join('');

        new Sortable(container, {
            animation: 300,
            handle: '.card-header',
            delay: 200, 
            delayOnTouchOnly: true,
            ghostClass: 'sortable-ghost',
            onStart: function() {
                if(document.body.classList.contains('locked')) return false;
            },
            onEnd: () => {
                const order = Array.from(container.children).map(c => c.dataset.id);
                localStorage.setItem('nexus_sort_v2', JSON.stringify(order));
            }
        });
    }

    // === 3. LÓGICA DE APERTURA (MODO FIXED) ===
    function toggleCard(id) {
        const card = document.querySelector(`.card[data-id="${id}"]`);
        const content = document.getElementById(`content-${id}`);
        // Solo buscamos iframe si NO es el item 6
        const iframe = id !== '6' ? content.querySelector('iframe') : null;
        const isActive = card.classList.contains('active');

        if (isActive) {
            card.classList.remove('active');
            document.body.classList.remove('locked');
            return;
        }

        document.querySelectorAll('.card.active').forEach(c => {
            c.classList.remove('active');
        });

        card.classList.add('active');
        document.body.classList.add('locked');

        // Cargar iframe normal si aplica
        if (iframe && !iframe.src) {
            iframe.src = iframe.getAttribute('data-src');
        }
    }

    // === 4. FUNCIONES DEL GENERADOR IA (ITEM 6) ===

    function copyPrompt() {
        const topic = document.getElementById('topicInput').value;
        if (!topic) {
            alert("Por favor escribe un tópico primero.");
            return;
        }

        // El Prompt Profesional solicitado
        const promptText = `Actúa como un profesor profesional de inglés y desarrollador web experto. Crea un archivo HTML único, didáctico y paso a paso sobre el tema: "${topic}". 
Requisitos obligatorios:
1. Diseño moderno y limpio, usando colores oscuros suaves y tipografías legibles.
2. Explicaciones claras del tema gramatical.
3. Ejemplos prácticos.
4. INTEGRACIÓN DE MOTOR TTS (Text-to-Speech): Agrega botones al lado de cada ejemplo en inglés que, al presionarlos, usen la Web Speech API (window.speechSynthesis) para leer el texto en voz alta con acento nativo.
5. El código debe ser un solo archivo HTML autocontenido (CSS y JS incluidos).
6. Estructura tipo acordeón o tarjetas para las secciones.
Dame solo el código HTML.`;

        navigator.clipboard.writeText(promptText).then(() => {
            const msg = document.getElementById('statusMsg');
            msg.style.opacity = '1';
            setTimeout(() => { msg.style.opacity = '0'; }, 2000);
        }).catch(err => {
            console.error('Error al copiar: ', err);
        });
    }

    async function pasteContent() {
        try {
            const text = await navigator.clipboard.readText();
            const workspace = document.getElementById('generated-workspace');
            
            // Limpiamos workspace
            workspace.innerHTML = '';

            // Creamos un iframe para aislar el CSS del código generado del CSS de la App
            const iframe = document.createElement('iframe');
            iframe.style.width = "100%";
            iframe.style.height = "100%";
            iframe.style.border = "none";
            
            workspace.appendChild(iframe);

            // Escribimos el contenido dentro del iframe
            const doc = iframe.contentWindow.document;
            doc.open();
            doc.write(text);
            doc.close();

        } catch (err) {
            alert("Permiso denegado para leer el portapapeles o está vacío.");
        }
    }

    function deleteContent() {
        const workspace = document.getElementById('generated-workspace');
        workspace.innerHTML = ''; // Elimina el iframe/contenido
        document.getElementById('topicInput').value = ''; // Limpia el input
    }

    renderApp();

</script>
</body>
</html>
