<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Convertidor de subtítulos bilingües</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; }
    textarea { width: 100%; height: 300px; margin-bottom: 20px; }
    .output { background: white; padding: 20px; border: 1px solid #ddd; }
    .line { margin: 15px 0; padding: 10px; background: #fff; border-left: 4px solid #007cba; }
    .text-block { margin-bottom: 10px; }
    .english { color: #2c3e50; font-weight: bold; }
    .spanish { color: #e74c3c; }
    .controls button { margin-right: 10px; padding: 5px 10px; }
  </style>
</head>
<body>

  <h1>Convertidor de subtítulos inglés-español con timestamp</h1>
  
  <textarea id id="inputText" placeholder="Pega aquí el texto con timestamps...">[00:00](https://youtu.be/HAnw168huqA?t=0.091) [MUSIC] Welcome. I'm very excited today to talk about effective speaking in spontaneous situations. I thank you all for joining us, even though the title of my talk is grammatically incorrect.

[00:16](https://youtu.be/HAnw168huqA?t=16.83) I thought that might scare a few of you away. But I learned teaching here at the business school, catching people's attention is hard. So, something as simple as that, I thought, might draw a few of you here, so this is going to be a highly interactive and participative workshop today.</textarea>

  <button onclick="convertir()">Convertir a formato HTML</button>
  <button onclick="document.getElementById('inputText').value = ''">Limpiar</button>

  <h2>Resultado:</h2>
  <div id="resultado" class="output"></div>

  <script>
    function timeToSeconds(time) {
      const parts = time.split(':').map(Number);
      if (parts.length === 3) {
        return parts[0] * 3600 + parts[1] * 60 + parts[2];
      } else {
        return parts[0] * 60 + parts[1];
      }
    }

    function convertir() {
      const input = document.getElementById('inputText').value;
      const lines = input.trim().split('\n\n');
      let html = '';

      lines.forEach(block => {
        const firstLine = block.trim().split('\n')[0];
        const timeMatch = firstLine.match(/\[((\d+:)?\d+:\d+)\]/);
        
        if (!timeMatch) return;

        const timeStr = timeMatch[1];
        const seconds = timeToSeconds(timeStr);

        // Extrae el texto limpio (sin el timestamp ni el link)
        let text = block.replace(/^\[.*?\].*$/m, '').trim();
        text = text.replace(/\[MUSIC\]/gi, '').trim();

        // Aquí debes colocar la traducción al español correspondiente
        // Por ahora pongo un ejemplo, tú tendrás que escribirla manualmente o usar otro método
        const translations = {
          "Welcome. I'm very excited today to talk about effective speaking in spontaneous situations. I thank you all for joining us, even though the title of my talk is grammatically incorrect.": "Bienvenidos. Estoy muy emocionado hoy de hablar sobre cómo hablar efectivamente en situaciones espontáneas. Gracias a todos por acompañarnos, aunque el título de mi charla está gramaticalmente incorrecto.",
          "I thought that might scare a few of you away. But I learned teaching here at the business school, catching people's attention is hard. So, something as simple as that, I thought, might draw a few of you here, so this is going to be a highly interactive and participative workshop today.": "Pensé que eso podría ahuyentar a algunos de ustedes. Pero aprendí enseñando aquí en la escuela de negocios que captar la atención de la gente es difícil. Así que algo tan simple como eso, pensé, podría atraer a algunos de ustedes aquí, así que este va a ser un taller muy interactivo y participativo hoy."
        };

        let spanish = translations[text] || "[Falta traducción]";

        html += `<div class="line" data-time="${seconds}">
  <div class="line-content">
    <div class="text-block">
      <div class="english">${text.replace(/\n/g, '<br>')}</div>
      <div class="spanish">${spanish.replace(/\n/g, '<br>')}</div>
    </div>
    <div class="controls">
      <button class="btn playBtn">Play</button>
      <button class="btn speakBtn">Speak</button>
    </div>
  </div>
</div>\n\n`;
      });

      document.getElementById('resultado').innerHTML = html;
    }
  </script>

<p><strong>Nota:</strong> Este script detecta automáticamente los timestamps y genera el HTML exacto que necesitas. La traducción al español la tienes que poner tú (o puedes integrarle después una API de traducción como DeepL o Google Translate si quieres automatizarlo).</p>

¿Quieres que te haga una versión que incluya automáticamente traducción con DeepL o Google Translate API? También puedo darte una versión que funcione con archivos .srt directamente.
