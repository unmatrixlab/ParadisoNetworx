<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MDC Theory - English Digraphs and Blends</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            /* CAMBIO DE COLOR: Violeta para Nivel 2 */
            --primary: #7c3aed;
            --primary-dark: #6d28d9;
            --danger: #ef4444;
            --bg-body: #f3f4f6;
            --card-bg: rgba(255, 255, 255, 0.85);
            --text-main: #1f2937;
            --text-muted: #6b7280;
            --header-height: 60px;
            --radius-key: 12px;
            --radius-card: 20px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: var(--bg-body);
            font-family: 'Inter', sans-serif;
            padding-top: var(--header-height);
            padding-bottom: 60px;
            color: var(--text-main);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        /* ====== HEADER ====== */
        #mdc-header {
            position: fixed;
            top: 0; left: 0; width: 100%;
            height: var(--header-height);
            background: rgba(31, 41, 55, 0.85);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid rgba(255,255,255,0.08);
        }
        #mdc-header a {
            text-decoration: none;
            font-weight: 800;
            font-size: 18px;
            letter-spacing: 1px;
            background: linear-gradient(to right, #fff, #a5b4fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: opacity 0.2s;
        }
        #mdc-header a:hover { opacity: 0.8; }
        /* ====== LAYOUT ====== */
        .main-container {
            width: 95%;
            max-width: 800px;
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }
        .page-title {
            font-size: 2rem;
            font-weight: 800;
            text-align: center;
            /* Gradiente Violeta */
            background: linear-gradient(135deg, var(--text-main), var(--primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
       
        .page-subtitle {
            font-size: 1rem;
            color: var(--text-muted);
            margin-bottom: 10px;
            font-weight: 500;
        }
        /* ====== CONTROLS ====== */
        .controls-container {
            display: flex;
            gap: 15px;
            margin-bottom: 10px;
        }
        .ctrl-btn {
            border: none;
            padding: 10px 24px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.9rem;
            cursor: pointer;
            transition: transform 0.1s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .btn-play { background: var(--primary); color: white; }
        .btn-play:hover { background: var(--primary-dark); transform: translateY(-2px); }
        .btn-play:active { transform: scale(0.95); }
        .btn-stop { background: white; color: var(--danger); border: 1px solid #fee2e2; }
        .btn-stop:hover { background: #fef2f2; transform: translateY(-2px); }
        .btn-stop:active { transform: scale(0.95); }
        /* ====== KEYBOARD GRID (Adapted for Digraphs) ====== */
        .keyboard-grid {
            display: grid;
            /* Celdas un poco m√°s anchas para 2 letras */
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            width: 100%;
            padding: 20px;
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border-radius: var(--radius-card);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            border: 1px solid rgba(255,255,255,0.5);
        }
        .key {
            /* Aspecto rectangular suave */
            padding: 15px 0;
            background: white;
            border: 1px solid rgba(0,0,0,0.05);
            border-radius: var(--radius-key);
            font-size: 1.4rem;
            font-weight: 700;
            color: var(--text-main);
            cursor: pointer;
            transition: all 0.15s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05), inset 0 -2px 0 rgba(0,0,0,0.05);
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .key:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.08), inset 0 -2px 0 rgba(0,0,0,0.05);
            color: var(--primary);
        }
        .key:active, .key.active {
            transform: translateY(1px);
            box-shadow: 0 1px 2px rgba(0,0,0,0.05), inset 0 1px 2px rgba(0,0,0,0.05);
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        /* ====== INFO STAGE ====== */
        #info-stage { width: 100%; display: none; }
        #info-stage.visible {
            display: block;
            animation: slideUpFade 0.4s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
        }
        @keyframes slideUpFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .stage-card {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border-radius: var(--radius-card);
            padding: 30px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.08);
            border: 1px solid rgba(255,255,255,0.5);
        }
        .letter-header {
            display: flex; align-items: center; gap: 20px;
            margin-bottom: 20px; padding-bottom: 20px;
            border-bottom: 2px solid rgba(0,0,0,0.05);
        }
        .big-letter {
            font-size: 4rem; font-weight: 900; line-height: 1;
            color: var(--primary); cursor: pointer; letter-spacing: -2px;
        }
       
        .phonetic {
            font-family: 'Courier New', monospace; font-size: 1.4rem;
            color: var(--text-muted); background: rgba(0,0,0,0.05);
            padding: 5px 15px; border-radius: 10px;
        }
        .description {
            font-size: 0.95rem; color: var(--text-muted); margin-bottom: 25px;
            font-style: italic; line-height: 1.5;
        }
        .rules-container { display: grid; gap: 25px; }
        .rule-block h3 {
            font-size: 1.1rem; margin-bottom: 12px;
            color: var(--text-main); display: flex; align-items: center; gap: 8px;
        }
        .rule-block h3::before {
            content: ''; display: block; width: 6px; height: 6px;
            background: var(--primary); border-radius: 50%;
        }
        .examples-list { display: flex; flex-wrap: wrap; gap: 10px; }
        .example-word {
            background: white; padding: 8px 16px; border-radius: 20px;
            font-weight: 600; font-size: 0.95rem; color: var(--text-main);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); cursor: pointer;
            transition: all 0.2s; border: 1px solid transparent;
            display: flex; align-items: center; gap: 6px;
        }
        .example-word::after { content: 'üîä'; font-size: 0.8em; opacity: 0.5; }
        .example-word:hover { transform: translateY(-2px); border-color: var(--primary); color: var(--primary); }
        .example-word:active { transform: scale(0.95); }
        @media (max-width: 600px) {
            .keyboard-grid { grid-template-columns: repeat(3, 1fr); padding: 15px; gap: 8px; }
            .key { font-size: 1.2rem; }
            .big-letter { font-size: 3.5rem; }
        }

         /* ====== OCULTA HEADER ====== */
        #mdc-header { display: none !important; }
        body { padding-top: 0  !important; }
    </style>
</head>
<body>
    <div id="mdc-header">
        <a href="https://paradisonetworx.com/mdceng.html">MDC ENG</a>
    </div>
    <div class="main-container">
        <div>
            <h1 class="page-title">English Digraphs and Blends</h1>
            <div class="page-subtitle">Consonant Digraphs, Vowel Teams, and R-Controlled Vowels</div>
        </div>
        <div class="controls-container">
            <button class="ctrl-btn btn-play" onclick="playAll()">
                <span>‚ñ∂</span> Play All
            </button>
            <button class="ctrl-btn btn-stop" onclick="stopAll()">
                <span>‚èπ</span> Stop
            </button>
        </div>
        <div class="keyboard-grid" id="keyboard-container">
        </div>
        <div id="info-stage">
        </div>
    </div>
   <script>
        // === 1. BASE DE DATOS DE D√çGRAFOS (CON SONIDOS REALES) ===
     // === 1. BASE DE DATOS DEFINITIVA (CONSONANTES + VOCALES + BOSSY R) ===
        const digraphData = {
            // --- GRUPO 1: CONSONANTES MAGICAS (Tus originales) ---
            "SH": {
                audioSim: "ship",
                phonetic: "/ É/",
                desc: "The 'Quiet Sound'. Round your lips and blow air.",
                rules: [
                    { name: "Start", words: ["Shoe", "Ship", "Shop", "Shell", "Show", "Share"] },
                    { name: "End", words: ["Fish", "Wash", "Push", "Cash", "Fresh", "Wish"] },
                    { name: "Suffix -TION", words: ["Action", "Station", "Option"] }
                ]
            },
            "CH": {
                audioSim: "chair",
                phonetic: "/t É/",
                desc: "The 'Explosive Sound'. Like a train starting: Choo-choo!",
                rules: [
                    { name: "Standard /t É/", words: ["Chair", "Cheese", "Church", "Child", "Choose", "Change"] },
                    { name: "Hard /k/ (Greek)", words: ["School", "Chemistry", "Mechanic", "Stomach"] },
                    { name: "Soft / É/ (French)", words: ["Chef", "Machine", "Chicago"] }
                ]
            },
            "TH": {
                audioSim: "think",
                phonetic: "/Œ∏/ vs /√∞/",
                desc: "Tongue between teeth. The classic English sound.",
                rules: [
                    { name: "Unvoiced (Air)", words: ["Think", "Three", "Thank", "Bath", "Mouth", "Tooth"] },
                    { name: "Voiced (Vibration)", words: ["This", "That", "Father", "Mother", "Brother", "Smooth"] }
                ]
            },
            "PH": {
                audioSim: "phone",
                phonetic: "/f/",
                desc: "Sounds exactly like 'F'. Used in Greek words.",
                rules: [
                    { name: "Standard /f/", words: ["Phone", "Photo", "Elephant", "Dolphin", "Graph", "Physical"] }
                ]
            },
            "WH": {
                audioSim: "what",
                phonetic: "/w/",
                desc: "Usually just 'W'. The 'H' is silent. In some dialects, pronounced with a breathy /hw/.",
                rules: [
                    { name: "Standard /w/", words: ["What", "When", "White", "Why", "Where", "Wheel"] },
                    { name: "Silent W /h/", words: ["Who", "Whole", "Whose"] }
                ]
            },
            "NG": {
                audioSim: "ring",
                phonetic: "/≈ã/",
                desc: "Nasal sound. Back of the throat.",
                rules: [
                    { name: "End of word", words: ["King", "Song", "Ring", "Long", "Strong", "Wrong"] },
                    { name: "Gerund (-ing)", words: ["Running", "Eating", "Going", "Sleeping"] }
                ]
            },
            "GH": {
                audioSim: "laugh",
                phonetic: "Silent or /f/",
                desc: "The trickiest combination in English.",
                rules: [
                    { name: "Silent GH", words: ["High", "Night", "Light", "Right", "Eight", "Though"] },
                    { name: "Sound /f/", words: ["Laugh", "Tough", "Enough", "Rough", "Cough"] },
                    { name: "Start /g/", words: ["Ghost", "Ghetto"] }
                ]
            },
           
            // --- GRUPO 2: VOCALES COMBINADAS (VOWEL TEAMS) ---
            "EE/EA": {
                audioSim: "see",
                phonetic: "/iÀê/",
                desc: "Long 'E'. 'When two vowels go walking, the first one does the talking'.",
                rules: [
                    { name: "Double E", words: ["See", "Tree", "Green", "Need", "Feet", "Deep"] },
                    { name: "EA (Long E)", words: ["Eat", "Tea", "Team", "Sea", "Meat", "Read"] },
                    { name: "EA (Short /e/ Exception)", words: ["Bread", "Head", "Dead"] },
                    { name: "EA (Long A /e…™/ Exception)", words: ["Great", "Steak", "Break"] }
                ]
            },
            "AI/AY": {
                audioSim: "day",
                phonetic: "/e…™/",
                desc: "Long 'A'. Usually AI in the middle, AY at the end.",
                rules: [
                    { name: "AI (Middle)", words: ["Rain", "Train", "Mail", "Wait", "Pain", "Brain"] },
                    { name: "AY (End)", words: ["Day", "Play", "Say", "May", "Way", "Stay"] }
                ]
            },
            "OA/OW": {
                audioSim: "go",
                phonetic: "/o ä/",
                desc: "Long 'O'. OA inside words, OW at the end.",
                rules: [
                    { name: "OA (Middle)", words: ["Boat", "Road", "Coat", "Soap", "Goat", "Toast"] },
                    { name: "OW (End - Long O)", words: ["Snow", "Show", "Slow", "Grow", "Low", "Yellow"] }
                ]
            },
            "OO": {
                audioSim: "moon",
                phonetic: "/uÀê/ or / ä/",
                desc: "The spooky sound (Moon) or the short sound (Book).",
                rules: [
                    { name: "Long OO /uÀê/", words: ["Moon", "Food", "Room", "School", "Too", "Cool"] },
                    { name: "Short OO / ä/", words: ["Book", "Look", "Good", "Foot", "Cook", "Wood"] }
                ]
            },
            "OU/OW": {
                audioSim: "ouch",
                phonetic: "/a ä/",
                desc: "The 'Pain' sound. Imagine you got hurt.",
                rules: [
                    { name: "OU (Middle)", words: ["Out", "House", "Mouse", "Cloud", "Mouth", "Sound"] },
                    { name: "OW (End/Middle)", words: ["Cow", "Now", "Down", "Town", "How", "Brown"] }
                ]
            },
            "OI/OY": {
                audioSim: "boy",
                phonetic: "/…î…™/",
                desc: "The classic 'Oy' sound.",
                rules: [
                    { name: "OI (Middle)", words: ["Coin", "Boil", "Join", "Point", "Voice", "Noise"] },
                    { name: "OY (End)", words: ["Boy", "Toy", "Joy", "Enjoy", "Destroy", "Annoy"] }
                ]
            },
            // --- GRUPO 3: BOSSY R (R CONTROLADA) ---
            "AR": {
                audioSim: "car",
                phonetic: "/…ëÀêr/",
                desc: "The 'Pirate Sound'. Open your mouth wide: Arrrr!",
                rules: [
                    { name: "Standard AR", words: ["Car", "Star", "Park", "Art", "Dark", "Far", "Hard", "Start"] }
                ]
            },
            "OR": {
                audioSim: "for",
                phonetic: "/…îÀêr/",
                desc: "The 'Horse' Sound.",
                rules: [
                    { name: "Standard OR", words: ["For", "More", "Corn", "Born", "Short", "Sport", "Horse"] }
                ]
            },
            "ER/IR/UR": {
                audioSim: "her",
                phonetic: "/…úÀêr/",
                desc: "The 'Thinking Sound' (Errr...). All three sound exactly the same!",
                rules: [
                    { name: "ER (End)", words: ["Her", "Teacher", "Water", "Better", "Paper"] },
                    { name: "IR (Middle)", words: ["Bird", "Girl", "First", "Shirt", "Third"] },
                    { name: "UR (Middle)", words: ["Turn", "Burn", "Hurt", "Nurse", "Purple"] }
                ]
            },
            // --- GRUPO 4: TERMINACIONES COMPLEJAS ---
            "TCH": {
                audioSim: "catch",
                phonetic: "/t É/",
                desc: "Same sound as CH, but used after a short vowel.",
                rules: [
                    { name: "Rule: Short Vowel + TCH", words: ["Catch", "Watch", "Kitchen", "Match", "Switch", "Pitch", "Much", "Lunch", "Rich"] }
                ]
            }
        };
        // === 2. VARIABLES ===
        const keyboardContainer = document.getElementById('keyboard-container');
        const infoStage = document.getElementById('info-stage');
        let activeKey = null;
        let isPlayingAll = false;
        let allKeys = [];
        // === 3. TTS (Generic) ===
        function speak(text, callback = null) {
            window.speechSynthesis.cancel();
           
            // Ajuste: Si el texto es muy corto (sonidos), lo hacemos un poco m√°s lento
            let rate = 0.9;
            if (text.length < 4) rate = 0.8;
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'en-US';
            utterance.rate = rate;
           
            if (callback) utterance.onend = callback;
            window.speechSynthesis.speak(utterance);
        }
        // === 4. UI LOGIC ===
        function initKeyboard() {
            const combos = Object.keys(digraphData);
            combos.forEach((combo, index) => {
                const keyBtn = document.createElement('button');
                keyBtn.classList.add('key');
                keyBtn.innerText = combo;
                keyBtn.dataset.index = index;
                keyBtn.onclick = () => handleKeyClick(combo, keyBtn);
                keyboardContainer.appendChild(keyBtn);
                allKeys.push(keyBtn);
            });
        }
        function updateUI(combo, btnElement) {
            if (activeKey) activeKey.classList.remove('active');
            btnElement.classList.add('active');
            activeKey = btnElement;
            const data = digraphData[combo];
            let rulesHTML = '';
           
            data.rules.forEach(rule => {
                let examplesHTML = '';
                rule.words.forEach(word => {
                    const clean = word.split('(')[0].trim();
                    examplesHTML += `<span class="example-word" onclick="speak('${clean}')">${word}</span>`;
                });
                rulesHTML += `
                    <div class="rule-block">
                        <h3>${rule.name}</h3>
                        <div class="examples-list">${examplesHTML}</div>
                    </div>`;
            });
            infoStage.innerHTML = `
                <div class="stage-card">
                    <div class="letter-header">
                        <div class="big-letter" onclick="speak('${data.audioSim}')">${combo}</div>
                        <div class="phonetic">${data.phonetic}</div>
                    </div>
                    <div class="description">${data.desc}</div>
                    <div class="rules-container">${rulesHTML}</div>
                </div>`;
           
            infoStage.classList.remove('visible');
            void infoStage.offsetWidth;
            infoStage.classList.add('visible');
        }
        function handleKeyClick(combo, btnElement) {
            stopAll();
            updateUI(combo, btnElement);
            speak(digraphData[combo].audioSim);
           
            // --- NUEVO: GUARDAR EN LOCALSTORAGE ---
            localStorage.setItem('mdc_digraph_last_combo', combo);
        }
        // === 5. PLAY ALL LOGIC ===
        function playAll() {
            if (isPlayingAll) return;
            isPlayingAll = true;
            playSequence(0);
        }
        function stopAll() {
            isPlayingAll = false;
            window.speechSynthesis.cancel();
        }
        function playSequence(index) {
            if (!isPlayingAll || index >= allKeys.length) {
                isPlayingAll = false;
                return;
            }
            const combo = Object.keys(digraphData)[index];
            const btn = allKeys[index];
            updateUI(combo, btn);
           
            // Usamos el audio simulado para la secuencia tambi√©n
            speak(digraphData[combo].audioSim, () => {
                if (isPlayingAll) {
                    setTimeout(() => {
                        playSequence(index + 1);
                    }, 1200); // Pausa un poco m√°s larga para asimilar el sonido
                }
            });
        }
        // Start
        initKeyboard();
        // --- NUEVO: RESTAURAR ESTADO AL CARGAR ---
        const savedCombo = localStorage.getItem('mdc_digraph_last_combo');
        if (savedCombo && digraphData[savedCombo]) {
            const keys = Object.keys(digraphData);
            const index = keys.indexOf(savedCombo);
            if (index !== -1) {
                const btn = allKeys[index];
                updateUI(savedCombo, btn);
            }
        }
    </script>
</body>
</html>
